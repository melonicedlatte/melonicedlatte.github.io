---
layout : article
title: "php 이미지 사이즈 줄인 후 업로드"
aside:
  toc: true
tags: Web
category : Web
author: melonicedlatte
published : True
hellogohn_num : 75
key : 2017-04-01-215118
--- 

<p>php <span style="background-color: rgb(255, 231, 206);">이미지 사이즈 줄인 후 업로드</span> 하는 방법을 알아보겠습니다.&nbsp;<br>크기가 큰 이미지 파일이 넘어오는 경우에는 용량을 줄여야 서버에 보관하기도 쉽고,&nbsp;<br>다른 파일에서 열어볼 때도 시간 지연 없이 열어 볼 수 있기 때문에 줄이는 경우가 많습니다.&nbsp;</p><p>php 는 이미지를 업로드 할 때, <span style="background-color: rgb(255, 231, 206);">임시 파일</span>에 들어있다가 업로드를 하는 방식을 사용합니다.<br>이미지를 업로드 할 때 임시 파일에 있는 파일을 바로 사이즈를 줄여서 업로드 하는 방법과&nbsp;<br>이미지를 일단 업로드 하고, 그 폴더에 있는 파일을 사이즈를 줄이는 경우가 있습니다.&nbsp;</p><p><br></p><p>&gt;&gt; form 형식 &nbsp;<br><br>아래와 같은 형식이고 아래에서 img, button 은 필요 없습니다. <br>선택한 이미지를 바로 보여줄 때 사용된 구조입니다.&nbsp;<br>그리고 주석처리 되어 있는 부분은 php 로 파일을 올릴 수 있는 최대 용량의 제한을 보여주는 form 입니다.&nbsp;<br><br>그것도 모르고 이 것 때문에 삽질을 많이 했네요.&nbsp;</p><div class="colorscripter-code" style="color:#010101; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#fafafa; border-radius:4px;" cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:6px; border-right:2px solid #e5e5e5"><div style="margin: 0px; padding: 0px; word-break: normal; text-align: right; color: rgb(102, 102, 102); line-height: 130%;"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div></div></td><td style="padding-top: 6px; padding-bottom: 6px;"><div style="margin: 0px; padding: 0px; line-height: 130%;"><div style="padding:0 6px; white-space:pre; line-height:130%">&lt;<span style="color:#066de2">form</span>&nbsp;<span style="color:#0a9989">enctype</span>=<span style="color:#df5000">"multipart/form-data"</span><span style="color:#0a9989"></span>&nbsp;<span style="color:#0a9989">action</span>=<span style="color:#df5000">"imageUpload.php"</span><span style="color:#0a9989"></span>&nbsp;<span style="color:#0a9989">method</span>=<span style="color:#df5000">"POST"</span><span style="color:#0a9989"></span>&gt;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;<span style="color:#999999"><!-- <input type="hidden" name="MAX_FILE_SIZE" value="30000" /> --></span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&lt;<span style="color:#066de2">img</span>&nbsp;<span style="color:#0a9989">id</span>=<span style="color:#df5000">"mainImg"</span><span style="color:#0a9989"></span>&nbsp;<span style="color:#0a9989">style</span>=<span style="color:#df5000">"max-width:500px;&nbsp;display:&nbsp;block;"</span><span style="color:#0a9989"></span>&nbsp;<span style="color:#0a9989">/</span>&gt;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&lt;<span style="color:#066de2">button</span>&nbsp;<span style="color:#0a9989">class</span>=<span style="color:#df5000">"replace"</span><span style="color:#0a9989"></span>&gt;사진&nbsp;올리기<!--<!--<span style="color:#066de2"---->button&gt;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&lt;<span style="color:#066de2">input</span>&nbsp;<span style="color:#0a9989">name</span>=<span style="color:#df5000">"mainImgInput"</span><span style="color:#0a9989"></span>&nbsp;<span style="color:#0a9989">class</span>=<span style="color:#df5000">"input"</span><span style="color:#0a9989"></span>&nbsp;<span style="color:#0a9989">type</span>=<span style="color:#df5000">"file"</span><span style="color:#0a9989"></span>&nbsp;<span style="color:#0a9989">id</span>=<span style="color:#df5000">"mainImgInput"</span><span style="color:#0a9989"></span>&nbsp;<span style="color:#0a9989">/</span>&gt;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&lt;<span style="color:#066de2">input</span>&nbsp;<span style="color:#0a9989">type</span>=<span style="color:#df5000">"submit"</span><span style="color:#0a9989"></span>&nbsp;<span style="color:#0a9989">value</span>=<span style="color:#df5000">"upload"</span><span style="color:#0a9989"></span>&nbsp;<span style="color:#0a9989">/</span>&gt;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><!--<span style="color:#066de2"--></div></div><div style="text-align:right; margin-top:-13px; margin-right:5px; font-size:9px; font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color: rgb(229, 229, 229);">Colored by Color Scripter</a></div></td><td style="vertical-align: bottom; padding-right: 2px; padding-bottom: 4px;"><a href="http://colorscripter.com/info#e" target="_blank" style="color: white;"><span style="font-size: 9px; word-break: normal; background-color: rgb(229, 229, 229); border-radius: 10px; padding: 1px;">cs</span></a></td></tr></tbody></table></div><p>필요한 것만 추리면, 위는 아래와 같은 소스 코드로 줄일 수 있습니다.&nbsp;</p><div class="colorscripter-code" style="color:#010101; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#fafafa; border-radius:4px;" cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:6px; border-right:2px solid #e5e5e5"><div style="margin: 0px; padding: 0px; word-break: normal; text-align: right; color: rgb(102, 102, 102); line-height: 130%;"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div></div></td><td style="padding-top: 6px; padding-bottom: 6px;"><div style="margin: 0px; padding: 0px; line-height: 130%;"><div style="padding:0 6px; white-space:pre; line-height:130%">&lt;<span style="color:#066de2">form</span>&nbsp;<span style="color:#0a9989">enctype</span>=<span style="color:#df5000">"multipart/form-data"</span><span style="color:#0a9989"></span>&nbsp;<span style="color:#0a9989">action</span>=<span style="color:#df5000">"imageUpload.php"</span><span style="color:#0a9989"></span>&nbsp;<span style="color:#0a9989">method</span>=<span style="color:#df5000">"POST"</span><span style="color:#0a9989"></span>&gt;</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&lt;<span style="color:#066de2">input</span>&nbsp;<span style="color:#0a9989">name</span>=<span style="color:#df5000">"mainImgInput"</span><span style="color:#0a9989"></span>&nbsp;<span style="color:#0a9989">class</span>=<span style="color:#df5000">"input"</span><span style="color:#0a9989"></span>&nbsp;<span style="color:#0a9989">type</span>=<span style="color:#df5000">"file"</span><span style="color:#0a9989"></span>&nbsp;<span style="color:#0a9989">id</span>=<span style="color:#df5000">"mainImgInput"</span><span style="color:#0a9989"></span>&nbsp;<span style="color:#0a9989">/</span>&gt;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&lt;<span style="color:#066de2">input</span>&nbsp;<span style="color:#0a9989">type</span>=<span style="color:#df5000">"submit"</span><span style="color:#0a9989"></span>&nbsp;<span style="color:#0a9989">value</span>=<span style="color:#df5000">"upload"</span><span style="color:#0a9989"></span>&nbsp;<span style="color:#0a9989">/</span>&gt;</div><div style="background-color:#f0f0f0; padding:0 6px; white-space:pre; line-height:130%"><!--<span style="color:#066de2"--></div></div><div style="text-align:right; margin-top:-13px; margin-right:5px; font-size:9px; font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color: rgb(229, 229, 229);">Colored by Color Scripter</a></div></td><td style="vertical-align: bottom; padding-right: 2px; padding-bottom: 4px;"><a href="http://colorscripter.com/info#e" target="_blank" style="color: white;"><span style="font-size: 9px; word-break: normal; background-color: rgb(229, 229, 229); border-radius: 10px; padding: 1px;">cs</span></a></td></tr></tbody></table></div><p><br></p><p>&gt;&gt; php 코드 ( 일단 업로드 하고, 업로드 된 파일을 resize 하기 )&nbsp;</p><div style="font-family: Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: rgb(128, 0, 0); font-size: 18px;">&lt;?</span><span style="font-size: 18px;"> </span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(0, 128, 0); font-size: 18px;">// 설정</span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$uploads_dir</span><span style="font-size: 18px;"> </span><span style="font-size: 18px;">=</span><span style="font-size: 18px;"> </span><span style="color: rgb(163, 21, 21); font-size: 18px;">'userImages/test'</span><span style="font-size: 18px;">;</span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$allowed_ext</span><span style="font-size: 18px;"> </span><span style="font-size: 18px;">=</span><span style="font-size: 18px;"> </span><span style="color: rgb(121, 94, 38); font-size: 18px;">array</span><span style="font-size: 18px;">(</span><span style="color: rgb(163, 21, 21); font-size: 18px;">'jpg'</span><span style="font-size: 18px;">,</span><span style="color: rgb(163, 21, 21); font-size: 18px;">'jpeg'</span><span style="font-size: 18px;">,</span><span style="color: rgb(163, 21, 21); font-size: 18px;">'png'</span><span style="font-size: 18px;">,</span><span style="color: rgb(163, 21, 21); font-size: 18px;">'gif'</span><span style="font-size: 18px;">);</span></div><div><span style="font-size: 18px;"> </span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(0, 128, 0); font-size: 18px;">// 폴더 존재 여부 확인 ( 없으면 생성 ) </span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(175, 0, 219); font-size: 18px;">if</span><span style="font-size: 18px;"> ( </span><span style="font-size: 18px;">!</span><span style="color: rgb(121, 94, 38); font-size: 18px;">is_dir</span><span style="font-size: 18px;"> ( </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$uploads_dir</span><span style="font-size: 18px;"> ) ){</span></div><div><span style="font-size: 18px;">        </span><span style="color: rgb(121, 94, 38); font-size: 18px;">mkdir</span><span style="font-size: 18px;">( </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$uploads_dir</span><span style="font-size: 18px;"> );</span></div><div><span style="font-size: 18px;">    }</span></div><div><span style="font-size: 18px;">     </span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(0, 128, 0); font-size: 18px;">// 변수 정리</span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$error</span><span style="font-size: 18px;"> </span><span style="font-size: 18px;">=</span><span style="font-size: 18px;"> </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$_FILES</span><span style="font-size: 18px;">[</span><span style="color: rgb(163, 21, 21); font-size: 18px;">'mainImgInput'</span><span style="font-size: 18px;">][</span><span style="color: rgb(163, 21, 21); font-size: 18px;">'error'</span><span style="font-size: 18px;">];</span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$name</span><span style="font-size: 18px;"> </span><span style="font-size: 18px;">=</span><span style="font-size: 18px;"> </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$_FILES</span><span style="font-size: 18px;">[</span><span style="color: rgb(163, 21, 21); font-size: 18px;">'mainImgInput'</span><span style="font-size: 18px;">][</span><span style="color: rgb(163, 21, 21); font-size: 18px;">'name'</span><span style="font-size: 18px;">];</span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$ext</span><span style="font-size: 18px;"> </span><span style="font-size: 18px;">=</span><span style="font-size: 18px;"> </span><span style="color: rgb(121, 94, 38); font-size: 18px;">array_pop</span><span style="font-size: 18px;">(</span><span style="color: rgb(121, 94, 38); font-size: 18px;">explode</span><span style="font-size: 18px;">(</span><span style="color: rgb(163, 21, 21); font-size: 18px;">'.'</span><span style="font-size: 18px;">, </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$name</span><span style="font-size: 18px;">));</span></div><div><span style="font-size: 18px;">     </span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(0, 128, 0); font-size: 18px;">// 오류 확인</span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(175, 0, 219); font-size: 18px;">if</span><span style="font-size: 18px;">( </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$error</span><span style="font-size: 18px;"> </span><span style="font-size: 18px;">!=</span><span style="font-size: 18px;"> UPLOAD_ERR_OK ) {</span></div><div><span style="font-size: 18px;">        </span><span style="color: rgb(175, 0, 219); font-size: 18px;">switch</span><span style="font-size: 18px;">( </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$error</span><span style="font-size: 18px;"> ) {</span></div><div><span style="font-size: 18px;">            </span><span style="color: rgb(175, 0, 219); font-size: 18px;">case</span><span style="font-size: 18px;"> UPLOAD_ERR_INI_SIZE:</span></div><div><span style="font-size: 18px;">            </span><span style="color: rgb(175, 0, 219); font-size: 18px;">case</span><span style="font-size: 18px;"> UPLOAD_ERR_FORM_SIZE:</span></div><div><span style="font-size: 18px;">                </span><span style="color: rgb(121, 94, 38); font-size: 18px;">echo</span><span style="font-size: 18px;"> </span><span style="color: rgb(163, 21, 21); font-size: 18px;">"파일이 너무 큽니다. (</span><span style="color: rgb(0, 16, 128); font-size: 18px;">$error</span><span style="color: rgb(163, 21, 21); font-size: 18px;">)"</span><span style="font-size: 18px;">;</span></div><div><span style="font-size: 18px;">                </span><span style="color: rgb(175, 0, 219); font-size: 18px;">break</span><span style="font-size: 18px;">;</span></div><div><span style="font-size: 18px;">            </span><span style="color: rgb(175, 0, 219); font-size: 18px;">case</span><span style="font-size: 18px;"> UPLOAD_ERR_NO_FILE:</span></div><div><span style="font-size: 18px;">                </span><span style="color: rgb(121, 94, 38); font-size: 18px;">echo</span><span style="font-size: 18px;"> </span><span style="color: rgb(163, 21, 21); font-size: 18px;">"파일이 첨부되지 않았습니다. (</span><span style="color: rgb(0, 16, 128); font-size: 18px;">$error</span><span style="color: rgb(163, 21, 21); font-size: 18px;">)"</span><span style="font-size: 18px;">;</span></div><div><span style="font-size: 18px;">                </span><span style="color: rgb(175, 0, 219); font-size: 18px;">break</span><span style="font-size: 18px;">;</span></div><div><span style="font-size: 18px;">            </span><span style="color: rgb(175, 0, 219); font-size: 18px;">default</span><span style="font-size: 18px;">:</span></div><div><span style="font-size: 18px;">                </span><span style="color: rgb(121, 94, 38); font-size: 18px;">echo</span><span style="font-size: 18px;"> </span><span style="color: rgb(163, 21, 21); font-size: 18px;">"파일이 제대로 업로드되지 않았습니다. (</span><span style="color: rgb(0, 16, 128); font-size: 18px;">$error</span><span style="color: rgb(163, 21, 21); font-size: 18px;">)"</span><span style="font-size: 18px;">;</span></div><div><span style="font-size: 18px;">        }</span></div><div><span style="font-size: 18px;">        </span><span style="color: rgb(175, 0, 219); font-size: 18px;">exit</span><span style="font-size: 18px;">;</span></div><div><span style="font-size: 18px;">    }</span></div><div><span style="font-size: 18px;">     </span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(0, 128, 0); font-size: 18px;">// 확장자 확인</span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(175, 0, 219); font-size: 18px;">if</span><span style="font-size: 18px;">( </span><span style="font-size: 18px;">!</span><span style="color: rgb(121, 94, 38); font-size: 18px;">in_array</span><span style="font-size: 18px;">(</span><span style="color: rgb(0, 16, 128); font-size: 18px;">$ext</span><span style="font-size: 18px;">, </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$allowed_ext</span><span style="font-size: 18px;">) ) {</span></div><div><span style="font-size: 18px;">        </span><span style="color: rgb(121, 94, 38); font-size: 18px;">echo</span><span style="font-size: 18px;"> </span><span style="color: rgb(163, 21, 21); font-size: 18px;">"허용되지 않는 확장자입니다."</span><span style="font-size: 18px;">;</span></div><div><span style="font-size: 18px;">        </span><span style="color: rgb(175, 0, 219); font-size: 18px;">exit</span><span style="font-size: 18px;">;</span></div><div><span style="font-size: 18px;">    }</span></div><div><span style="font-size: 18px;">     </span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(0, 128, 0); font-size: 18px;">// 파일 업로드</span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(121, 94, 38); font-size: 18px;">move_uploaded_file</span><span style="font-size: 18px;">( </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$_FILES</span><span style="font-size: 18px;">[</span><span style="color: rgb(163, 21, 21); font-size: 18px;">'mainImgInput'</span><span style="font-size: 18px;">][</span><span style="color: rgb(163, 21, 21); font-size: 18px;">'tmp_name'</span><span style="font-size: 18px;">], </span><span style="color: rgb(163, 21, 21); font-size: 18px;">"</span><span style="color: rgb(0, 16, 128); font-size: 18px;">$uploads_dir</span><span style="color: rgb(163, 21, 21); font-size: 18px;">/</span><span style="color: rgb(0, 16, 128); font-size: 18px;">$name</span><span style="color: rgb(163, 21, 21); font-size: 18px;">"</span><span style="font-size: 18px;">);</span></div><div><span style="font-size: 18px;"> </span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(0, 128, 0); font-size: 18px;">// 파일 정보 출력</span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(121, 94, 38); font-size: 18px;">echo</span><span style="font-size: 18px;"> </span><span style="color: rgb(163, 21, 21); font-size: 18px;">"</span></div><div><span style="color: rgb(163, 21, 21); font-size: 18px;">        &lt;h2&gt;파일 정보&lt;/h2&gt;</span></div><div><span style="color: rgb(163, 21, 21); font-size: 18px;">        &lt;p&gt;파일명: </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$name</span><span style="color: rgb(163, 21, 21); font-size: 18px;">&lt;/p&gt;</span></div><div><span style="color: rgb(163, 21, 21); font-size: 18px;">        &lt;p&gt;확장자: </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$ext</span><span style="color: rgb(163, 21, 21); font-size: 18px;">&lt;/p&gt;</span></div><div><span style="color: rgb(163, 21, 21); font-size: 18px;">        &lt;p&gt;파일형식: {</span><span style="color: rgb(0, 16, 128); font-size: 18px;">$_FILES</span><span style="color: rgb(163, 21, 21); font-size: 18px;">['mainImgInput']['type']}&lt;/p&gt;</span></div><div><span style="color: rgb(163, 21, 21); font-size: 18px;">        &lt;p&gt;파일크기: {</span><span style="color: rgb(0, 16, 128); font-size: 18px;">$_FILES</span><span style="color: rgb(163, 21, 21); font-size: 18px;">['mainImgInput']['size']} 바이트&lt;/p&gt;</span></div><div><span style="color: rgb(163, 21, 21); font-size: 18px;">        "</span><span style="font-size: 18px;">;</span></div><div><span style="font-size: 18px;"> </span></div><div><span style="font-size: 18px;"> </span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(0, 128, 0); font-size: 18px;">// 파일 압축 메소드 </span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(0, 0, 255); font-size: 18px;">function</span><span style="font-size: 18px;"> </span><span style="color: rgb(121, 94, 38); font-size: 18px;">compress</span><span style="font-size: 18px;">(</span><span style="color: rgb(0, 16, 128); font-size: 18px;">$source</span><span style="font-size: 18px;">,</span><span style="color: rgb(0, 16, 128); font-size: 18px;"> $destination</span><span style="font-size: 18px;">,</span><span style="color: rgb(0, 16, 128); font-size: 18px;"> $quality</span><span style="font-size: 18px;">) {</span></div><div><span style="font-size: 18px;"> </span></div><div><span style="font-size: 18px;">        </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$info</span><span style="font-size: 18px;"> </span><span style="font-size: 18px;">=</span><span style="font-size: 18px;"> </span><span style="color: rgb(121, 94, 38); font-size: 18px;">getimagesize</span><span style="font-size: 18px;">(</span><span style="color: rgb(0, 16, 128); font-size: 18px;">$source</span><span style="font-size: 18px;">);</span></div><div><span style="font-size: 18px;"> </span></div><div><span style="font-size: 18px;">        </span><span style="color: rgb(175, 0, 219); font-size: 18px;">if</span><span style="font-size: 18px;"> (</span><span style="color: rgb(0, 16, 128); font-size: 18px;">$info</span><span style="font-size: 18px;">[</span><span style="color: rgb(163, 21, 21); font-size: 18px;">'mime'</span><span style="font-size: 18px;">] </span><span style="font-size: 18px;">==</span><span style="font-size: 18px;"> </span><span style="color: rgb(163, 21, 21); font-size: 18px;">'image/jpeg'</span><span style="font-size: 18px;">) </span></div><div><span style="font-size: 18px;">            </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$image</span><span style="font-size: 18px;"> </span><span style="font-size: 18px;">=</span><span style="font-size: 18px;"> </span><span style="color: rgb(121, 94, 38); font-size: 18px;">imagecreatefromjpeg</span><span style="font-size: 18px;">(</span><span style="color: rgb(0, 16, 128); font-size: 18px;">$source</span><span style="font-size: 18px;">);</span></div><div><span style="font-size: 18px;"> </span></div><div><span style="font-size: 18px;">        </span><span style="color: rgb(175, 0, 219); font-size: 18px;">elseif</span><span style="font-size: 18px;"> (</span><span style="color: rgb(0, 16, 128); font-size: 18px;">$info</span><span style="font-size: 18px;">[</span><span style="color: rgb(163, 21, 21); font-size: 18px;">'mime'</span><span style="font-size: 18px;">] </span><span style="font-size: 18px;">==</span><span style="font-size: 18px;"> </span><span style="color: rgb(163, 21, 21); font-size: 18px;">'image/gif'</span><span style="font-size: 18px;">) </span></div><div><span style="font-size: 18px;">            </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$image</span><span style="font-size: 18px;"> </span><span style="font-size: 18px;">=</span><span style="font-size: 18px;"> </span><span style="color: rgb(121, 94, 38); font-size: 18px;">imagecreatefromgif</span><span style="font-size: 18px;">(</span><span style="color: rgb(0, 16, 128); font-size: 18px;">$source</span><span style="font-size: 18px;">);</span></div><div><span style="font-size: 18px;"> </span></div><div><span style="font-size: 18px;">        </span><span style="color: rgb(175, 0, 219); font-size: 18px;">elseif</span><span style="font-size: 18px;"> (</span><span style="color: rgb(0, 16, 128); font-size: 18px;">$info</span><span style="font-size: 18px;">[</span><span style="color: rgb(163, 21, 21); font-size: 18px;">'mime'</span><span style="font-size: 18px;">] </span><span style="font-size: 18px;">==</span><span style="font-size: 18px;"> </span><span style="color: rgb(163, 21, 21); font-size: 18px;">'image/png'</span><span style="font-size: 18px;">) </span></div><div><span style="font-size: 18px;">            </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$image</span><span style="font-size: 18px;"> </span><span style="font-size: 18px;">=</span><span style="font-size: 18px;"> </span><span style="color: rgb(121, 94, 38); font-size: 18px;">imagecreatefrompng</span><span style="font-size: 18px;">(</span><span style="color: rgb(0, 16, 128); font-size: 18px;">$source</span><span style="font-size: 18px;">);</span></div><div><span style="font-size: 18px;"> </span></div><div><span style="font-size: 18px;">        </span><span style="color: rgb(121, 94, 38); font-size: 18px;">imagejpeg</span><span style="font-size: 18px;">(</span><span style="color: rgb(0, 16, 128); font-size: 18px;">$image</span><span style="font-size: 18px;">, </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$destination</span><span style="font-size: 18px;">, </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$quality</span><span style="font-size: 18px;">);</span></div><div><span style="font-size: 18px;"> </span></div><div><span style="font-size: 18px;">        </span><span style="color: rgb(175, 0, 219); font-size: 18px;">return</span><span style="font-size: 18px;"> </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$destination</span><span style="font-size: 18px;">;</span></div><div><span style="font-size: 18px;">    }</span></div><div><span style="font-size: 18px;"> </span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(0, 128, 0); font-size: 18px;">// 파일 리사이즈 후 복사하기</span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$source_img</span><span style="font-size: 18px;"> </span><span style="font-size: 18px;">=</span><span style="font-size: 18px;"> </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$_FILES</span><span style="font-size: 18px;">[</span><span style="color: rgb(163, 21, 21); font-size: 18px;">'mainImgInput'</span><span style="font-size: 18px;">][</span><span style="color: rgb(163, 21, 21); font-size: 18px;">'tmp_name'</span><span style="font-size: 18px;">];</span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$destination_img</span><span style="font-size: 18px;"> </span><span style="font-size: 18px;">=</span><span style="font-size: 18px;"> </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$_FILES</span><span style="font-size: 18px;">[</span><span style="color: rgb(163, 21, 21); font-size: 18px;">'mainImgInput'</span><span style="font-size: 18px;">][</span><span style="color: rgb(163, 21, 21); font-size: 18px;">'tmp_name'</span><span style="font-size: 18px;">];</span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$d</span><span style="font-size: 18px;"> </span><span style="font-size: 18px;">=</span><span style="font-size: 18px;"> </span><span style="color: rgb(121, 94, 38); font-size: 18px;">compress</span><span style="font-size: 18px;">(</span><span style="color: rgb(0, 16, 128); font-size: 18px;">$source_img</span><span style="font-size: 18px;">, </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$destination_img</span><span style="font-size: 18px;">, </span><span style="color: rgb(9, 136, 90); font-size: 18px;">90</span><span style="font-size: 18px;">);</span></div><div><span style="font-size: 18px;"> </span></div><div><span style="color: rgb(128, 0, 0); font-size: 18px;">?</span><span style="color: rgb(128, 0, 0); font-size: 18px;">&gt;</span></div><br></div><p><br></p><p>출처 된 소스에서 디렉터리의 존재 여부를 체크해서 없으면 만드는 부분을 7줄에서 만들고 있습니다.&nbsp;</p><p>compress 라는 함수는 인자로 <span style="background-color: rgb(255, 231, 206);">( 원래 경로 , 생성할 경로 , 퀄리티 )&nbsp;</span>의 형식을 가지고 있다.&nbsp;</p><p>퀄리티를 90 으로 했을 때는, 원래 사이즈가 440kb 인 경우 110kb&nbsp;<br>퀄리티를 50 으로 했을 때는, 원래 사이즈가 440kb 인 경우 44.0kb 정도로 줄여졌다.&nbsp;</p><p><br></p><p><br></p><p>&gt;&gt; php 코드 ( 임시 파일에 있는 파일을 바로 업로드 하기 )&nbsp;</p><div style="font-family: Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 12px; line-height: 18px; white-space: pre;"><div><span style="color: rgb(128, 0, 0); font-size: 18px;">&lt;?</span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(0, 128, 0); font-size: 18px;">// 설정</span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$uploads_dir</span><span style="font-size: 18px;"> </span><span style="font-size: 18px;">=</span><span style="font-size: 18px;"> </span><span style="color: rgb(163, 21, 21); font-size: 18px;">'userImages/test'</span><span style="font-size: 18px;">;</span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$allowed_ext</span><span style="font-size: 18px;"> </span><span style="font-size: 18px;">=</span><span style="font-size: 18px;"> </span><span style="color: rgb(121, 94, 38); font-size: 18px;">array</span><span style="font-size: 18px;">(</span><span style="color: rgb(163, 21, 21); font-size: 18px;">'jpg'</span><span style="font-size: 18px;">,</span><span style="color: rgb(163, 21, 21); font-size: 18px;">'jpeg'</span><span style="font-size: 18px;">,</span><span style="color: rgb(163, 21, 21); font-size: 18px;">'png'</span><span style="font-size: 18px;">,</span><span style="color: rgb(163, 21, 21); font-size: 18px;">'gif'</span><span style="font-size: 18px;">);</span></div><div><span style="font-size: 18px;"> </span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(0, 128, 0); font-size: 18px;">// 폴더 존재 여부 확인 ( 없으면 생성 ) </span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(175, 0, 219); font-size: 18px;">if</span><span style="font-size: 18px;"> ( </span><span style="font-size: 18px;">!</span><span style="color: rgb(121, 94, 38); font-size: 18px;">is_dir</span><span style="font-size: 18px;"> ( </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$uploads_dir</span><span style="font-size: 18px;"> ) ){</span></div><div><span style="font-size: 18px;">        </span><span style="color: rgb(121, 94, 38); font-size: 18px;">mkdir</span><span style="font-size: 18px;">( </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$uploads_dir</span><span style="font-size: 18px;"> );</span></div><div><span style="font-size: 18px;">    }</span></div><div><span style="font-size: 18px;">     </span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(0, 128, 0); font-size: 18px;">// 변수 정리</span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$error</span><span style="font-size: 18px;"> </span><span style="font-size: 18px;">=</span><span style="font-size: 18px;"> </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$_FILES</span><span style="font-size: 18px;">[</span><span style="color: rgb(163, 21, 21); font-size: 18px;">'mainImgInput'</span><span style="font-size: 18px;">][</span><span style="color: rgb(163, 21, 21); font-size: 18px;">'error'</span><span style="font-size: 18px;">];</span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$name</span><span style="font-size: 18px;"> </span><span style="font-size: 18px;">=</span><span style="font-size: 18px;"> </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$_FILES</span><span style="font-size: 18px;">[</span><span style="color: rgb(163, 21, 21); font-size: 18px;">'mainImgInput'</span><span style="font-size: 18px;">][</span><span style="color: rgb(163, 21, 21); font-size: 18px;">'name'</span><span style="font-size: 18px;">];</span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$ext</span><span style="font-size: 18px;"> </span><span style="font-size: 18px;">=</span><span style="font-size: 18px;"> </span><span style="color: rgb(121, 94, 38); font-size: 18px;">array_pop</span><span style="font-size: 18px;">(</span><span style="color: rgb(121, 94, 38); font-size: 18px;">explode</span><span style="font-size: 18px;">(</span><span style="color: rgb(163, 21, 21); font-size: 18px;">'.'</span><span style="font-size: 18px;">, </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$name</span><span style="font-size: 18px;">));</span></div><div><span style="font-size: 18px;">     </span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(0, 128, 0); font-size: 18px;">// 오류 확인</span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(175, 0, 219); font-size: 18px;">if</span><span style="font-size: 18px;">( </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$error</span><span style="font-size: 18px;"> </span><span style="font-size: 18px;">!=</span><span style="font-size: 18px;"> UPLOAD_ERR_OK ) {</span></div><div><span style="font-size: 18px;">        </span><span style="color: rgb(175, 0, 219); font-size: 18px;">switch</span><span style="font-size: 18px;">( </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$error</span><span style="font-size: 18px;"> ) {</span></div><div><span style="font-size: 18px;">            </span><span style="color: rgb(175, 0, 219); font-size: 18px;">case</span><span style="font-size: 18px;"> UPLOAD_ERR_INI_SIZE:</span></div><div><span style="font-size: 18px;">            </span><span style="color: rgb(175, 0, 219); font-size: 18px;">case</span><span style="font-size: 18px;"> UPLOAD_ERR_FORM_SIZE:</span></div><div><span style="font-size: 18px;">                </span><span style="color: rgb(121, 94, 38); font-size: 18px;">echo</span><span style="font-size: 18px;"> </span><span style="color: rgb(163, 21, 21); font-size: 18px;">"파일이 너무 큽니다. (</span><span style="color: rgb(0, 16, 128); font-size: 18px;">$error</span><span style="color: rgb(163, 21, 21); font-size: 18px;">)"</span><span style="font-size: 18px;">;</span></div><div><span style="font-size: 18px;">                </span><span style="color: rgb(175, 0, 219); font-size: 18px;">break</span><span style="font-size: 18px;">;</span></div><div><span style="font-size: 18px;">            </span><span style="color: rgb(175, 0, 219); font-size: 18px;">case</span><span style="font-size: 18px;"> UPLOAD_ERR_NO_FILE:</span></div><div><span style="font-size: 18px;">                </span><span style="color: rgb(121, 94, 38); font-size: 18px;">echo</span><span style="font-size: 18px;"> </span><span style="color: rgb(163, 21, 21); font-size: 18px;">"파일이 첨부되지 않았습니다. (</span><span style="color: rgb(0, 16, 128); font-size: 18px;">$error</span><span style="color: rgb(163, 21, 21); font-size: 18px;">)"</span><span style="font-size: 18px;">;</span></div><div><span style="font-size: 18px;">                </span><span style="color: rgb(175, 0, 219); font-size: 18px;">break</span><span style="font-size: 18px;">;</span></div><div><span style="font-size: 18px;">            </span><span style="color: rgb(175, 0, 219); font-size: 18px;">default</span><span style="font-size: 18px;">:</span></div><div><span style="font-size: 18px;">                </span><span style="color: rgb(121, 94, 38); font-size: 18px;">echo</span><span style="font-size: 18px;"> </span><span style="color: rgb(163, 21, 21); font-size: 18px;">"파일이 제대로 업로드되지 않았습니다. (</span><span style="color: rgb(0, 16, 128); font-size: 18px;">$error</span><span style="color: rgb(163, 21, 21); font-size: 18px;">)"</span><span style="font-size: 18px;">;</span></div><div><span style="font-size: 18px;">        }</span></div><div><span style="font-size: 18px;">        </span><span style="color: rgb(175, 0, 219); font-size: 18px;">exit</span><span style="font-size: 18px;">;</span></div><div><span style="font-size: 18px;">    }</span></div><div><span style="font-size: 18px;">     </span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(0, 128, 0); font-size: 18px;">// 확장자 확인</span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(175, 0, 219); font-size: 18px;">if</span><span style="font-size: 18px;">( </span><span style="font-size: 18px;">!</span><span style="color: rgb(121, 94, 38); font-size: 18px;">in_array</span><span style="font-size: 18px;">(</span><span style="color: rgb(0, 16, 128); font-size: 18px;">$ext</span><span style="font-size: 18px;">, </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$allowed_ext</span><span style="font-size: 18px;">) ) {</span></div><div><span style="font-size: 18px;">        </span><span style="color: rgb(121, 94, 38); font-size: 18px;">echo</span><span style="font-size: 18px;"> </span><span style="color: rgb(163, 21, 21); font-size: 18px;">"허용되지 않는 확장자입니다."</span><span style="font-size: 18px;">;</span></div><div><span style="font-size: 18px;">        </span><span style="color: rgb(175, 0, 219); font-size: 18px;">exit</span><span style="font-size: 18px;">;</span></div><div><span style="font-size: 18px;">    }</span></div><div><span style="font-size: 18px;"> </span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$url</span><span style="font-size: 18px;"> </span><span style="font-size: 18px;">=</span><span style="font-size: 18px;"> </span><span style="color: rgb(163, 21, 21); font-size: 18px;">'userImages/test/destination.jpg'</span><span style="font-size: 18px;">;</span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$filename</span><span style="font-size: 18px;"> </span><span style="font-size: 18px;">=</span><span style="font-size: 18px;"> </span><span style="color: rgb(121, 94, 38); font-size: 18px;">compress_image</span><span style="font-size: 18px;">(</span><span style="color: rgb(0, 16, 128); font-size: 18px;">$_FILES</span><span style="font-size: 18px;">[</span><span style="color: rgb(163, 21, 21); font-size: 18px;">"mainImgInput"</span><span style="font-size: 18px;">][</span><span style="color: rgb(163, 21, 21); font-size: 18px;">"tmp_name"</span><span style="font-size: 18px;">], </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$url</span><span style="font-size: 18px;">, </span><span style="color: rgb(9, 136, 90); font-size: 18px;">80</span><span style="font-size: 18px;">);</span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$buffer</span><span style="font-size: 18px;"> </span><span style="font-size: 18px;">=</span><span style="font-size: 18px;"> </span><span style="color: rgb(121, 94, 38); font-size: 18px;">file_get_contents</span><span style="font-size: 18px;">(</span><span style="color: rgb(0, 16, 128); font-size: 18px;">$url</span><span style="font-size: 18px;">);</span></div><div><span style="font-size: 18px;"> </span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(0, 128, 0); font-size: 18px;">// 파일 정보 출력</span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(121, 94, 38); font-size: 18px;">echo</span><span style="font-size: 18px;"> </span><span style="color: rgb(163, 21, 21); font-size: 18px;">"파일 정보</span></div><div><span style="color: rgb(163, 21, 21); font-size: 18px;">        파일명: </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$name</span></div><div><span style="color: rgb(163, 21, 21); font-size: 18px;">        확장자: </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$ext</span></div><div><span style="color: rgb(163, 21, 21); font-size: 18px;">        파일형식: {</span><span style="color: rgb(0, 16, 128); font-size: 18px;">$_FILES</span><span style="color: rgb(163, 21, 21); font-size: 18px;">['mainImgInput']['type']}</span></div><div><span style="color: rgb(163, 21, 21); font-size: 18px;">        파일크기: {</span><span style="color: rgb(0, 16, 128); font-size: 18px;">$_FILES</span><span style="color: rgb(163, 21, 21); font-size: 18px;">['mainImgInput']['size']} 바이트</span></div><div><span style="color: rgb(163, 21, 21); font-size: 18px;">        url: {</span><span style="color: rgb(0, 16, 128); font-size: 18px;">$url</span><span style="color: rgb(163, 21, 21); font-size: 18px;">}</span></div><div><span style="color: rgb(163, 21, 21); font-size: 18px;">        filename: {</span><span style="color: rgb(0, 16, 128); font-size: 18px;">$filename</span><span style="color: rgb(163, 21, 21); font-size: 18px;">}</span></div><div><span style="color: rgb(163, 21, 21); font-size: 18px;">        "</span><span style="font-size: 18px;">;</span></div><div><span style="font-size: 18px;"> </span></div><div><span style="font-size: 18px;"> </span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(0, 128, 0); font-size: 18px;">// 파일 압축 메소드 </span></div><div><span style="font-size: 18px;">    </span><span style="color: rgb(0, 0, 255); font-size: 18px;">function</span><span style="font-size: 18px;"> </span><span style="color: rgb(121, 94, 38); font-size: 18px;">compress</span><span style="font-size: 18px;">(</span><span style="color: rgb(0, 16, 128); font-size: 18px;">$source</span><span style="font-size: 18px;">,</span><span style="color: rgb(0, 16, 128); font-size: 18px;"> $destination</span><span style="font-size: 18px;">,</span><span style="color: rgb(0, 16, 128); font-size: 18px;"> $quality</span><span style="font-size: 18px;">) {</span></div><div><span style="font-size: 18px;"> </span></div><div><span style="font-size: 18px;">        </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$info</span><span style="font-size: 18px;"> </span><span style="font-size: 18px;">=</span><span style="font-size: 18px;"> </span><span style="color: rgb(121, 94, 38); font-size: 18px;">getimagesize</span><span style="font-size: 18px;">(</span><span style="color: rgb(0, 16, 128); font-size: 18px;">$source</span><span style="font-size: 18px;">);</span></div><div><span style="font-size: 18px;"> </span></div><div><span style="font-size: 18px;">        </span><span style="color: rgb(175, 0, 219); font-size: 18px;">if</span><span style="font-size: 18px;"> (</span><span style="color: rgb(0, 16, 128); font-size: 18px;">$info</span><span style="font-size: 18px;">[</span><span style="color: rgb(163, 21, 21); font-size: 18px;">'mime'</span><span style="font-size: 18px;">] </span><span style="font-size: 18px;">==</span><span style="font-size: 18px;"> </span><span style="color: rgb(163, 21, 21); font-size: 18px;">'image/jpeg'</span><span style="font-size: 18px;">) </span></div><div><span style="font-size: 18px;">            </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$image</span><span style="font-size: 18px;"> </span><span style="font-size: 18px;">=</span><span style="font-size: 18px;"> </span><span style="color: rgb(121, 94, 38); font-size: 18px;">imagecreatefromjpeg</span><span style="font-size: 18px;">(</span><span style="color: rgb(0, 16, 128); font-size: 18px;">$source</span><span style="font-size: 18px;">);</span></div><div><span style="font-size: 18px;"> </span></div><div><span style="font-size: 18px;">        </span><span style="color: rgb(175, 0, 219); font-size: 18px;">elseif</span><span style="font-size: 18px;"> (</span><span style="color: rgb(0, 16, 128); font-size: 18px;">$info</span><span style="font-size: 18px;">[</span><span style="color: rgb(163, 21, 21); font-size: 18px;">'mime'</span><span style="font-size: 18px;">] </span><span style="font-size: 18px;">==</span><span style="font-size: 18px;"> </span><span style="color: rgb(163, 21, 21); font-size: 18px;">'image/gif'</span><span style="font-size: 18px;">) </span></div><div><span style="font-size: 18px;">            </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$image</span><span style="font-size: 18px;"> </span><span style="font-size: 18px;">=</span><span style="font-size: 18px;"> </span><span style="color: rgb(121, 94, 38); font-size: 18px;">imagecreatefromgif</span><span style="font-size: 18px;">(</span><span style="color: rgb(0, 16, 128); font-size: 18px;">$source</span><span style="font-size: 18px;">);</span></div><div><span style="font-size: 18px;"> </span></div><div><span style="font-size: 18px;">        </span><span style="color: rgb(175, 0, 219); font-size: 18px;">elseif</span><span style="font-size: 18px;"> (</span><span style="color: rgb(0, 16, 128); font-size: 18px;">$info</span><span style="font-size: 18px;">[</span><span style="color: rgb(163, 21, 21); font-size: 18px;">'mime'</span><span style="font-size: 18px;">] </span><span style="font-size: 18px;">==</span><span style="font-size: 18px;"> </span><span style="color: rgb(163, 21, 21); font-size: 18px;">'image/png'</span><span style="font-size: 18px;">) </span></div><div><span style="font-size: 18px;">            </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$image</span><span style="font-size: 18px;"> </span><span style="font-size: 18px;">=</span><span style="font-size: 18px;"> </span><span style="color: rgb(121, 94, 38); font-size: 18px;">imagecreatefrompng</span><span style="font-size: 18px;">(</span><span style="color: rgb(0, 16, 128); font-size: 18px;">$source</span><span style="font-size: 18px;">);</span></div><div><span style="font-size: 18px;"> </span></div><div><span style="font-size: 18px;">        </span><span style="color: rgb(121, 94, 38); font-size: 18px;">imagejpeg</span><span style="font-size: 18px;">(</span><span style="color: rgb(0, 16, 128); font-size: 18px;">$image</span><span style="font-size: 18px;">, </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$destination</span><span style="font-size: 18px;">, </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$quality</span><span style="font-size: 18px;">);</span></div><div><span style="font-size: 18px;"> </span></div><div><span style="font-size: 18px;">        </span><span style="color: rgb(175, 0, 219); font-size: 18px;">return</span><span style="font-size: 18px;"> </span><span style="color: rgb(0, 16, 128); font-size: 18px;">$destination</span><span style="font-size: 18px;">;</span></div><div><span style="font-size: 18px;">    }</span></div><div><span style="color: rgb(128, 0, 0); font-size: 18px;">?</span><span style="color: rgb(128, 0, 0); font-size: 18px;">&gt;</span></div><br></div><p><br></p><p>나머지는 거의 다 동일하고 38~40 줄을 유의해서 보자. ( 40 줄은 안 써주어도 된다. 핵심은 39 줄 )&nbsp;<br>원래 경로에 버퍼를 넣어주고, 원하는 파일의 이름을 써주면 ?? 파일이 생성된다.&nbsp;</p><p><br></p><p>&gt;&gt; 결과&nbsp;</p><p><img src="/system/uploads/images/000/000/238/original/image.png?1507544501" style="width: 303px;"><br></p><p>결과는 위와 같이 나오게 된다.&nbsp;</p><p><br></p><p><img src="/system/uploads/images/000/000/239/original/image.png?1507544506" style="width: 224px;"><br></p><p>실제 폴더에는 이렇게 저장된다.&nbsp;</p><p><br></p><p><img src="/system/uploads/images/000/000/240/original/image.png?1507544514" style="width: 479px;"><br></p><p>80 의 압축률로 압축을 했을 경우 위와 같은 용량 차이가 남을 알 수 있다.&nbsp;</p><p><br></p><p><br></p><p><br></p><p><span style="background-color: rgb(255, 231, 206);">!! 팁 !! </span><br>temp 파일에 있는 경우에는 한 번 사용하면 그 다음에는 파일이 사라져서 사용할 수 없다.<br>ex ) 업로드 하고 나서, 임시 파일에 있는 파일을 사용하려고 하면 사용할 수 없다.&nbsp;<br><br></p><p></p><div style="text-align: center;">- 출처 -&nbsp;</div><div style="text-align: center;"><a href="http://zetawiki.com/wiki/PHP_%ED%8C%8C%EC%9D%BC_%EC%97%85%EB%A1%9C%EB%93%9C_%EA%B5%AC%ED%98%84" style="background-color: rgb(255, 255, 255);">http://zetawiki.com/wiki/PHP_%ED%8C%8C%EC%9D%BC_%EC%97%85%EB%A1%9C%EB%93%9C_%EA%B5%AC%ED%98%84</a><a href="http://zetawiki.com/wiki/PHP_%ED%8C%8C%EC%9D%BC_%EC%97%85%EB%A1%9C%EB%93%9C_%EA%B5%AC%ED%98%84"><br></a></div><div style="text-align: center;"><a href="https://www.apptha.com/blog/how-to-reduce-image-file-size-while-uploading-using-php-code/"></a><a href="https://www.apptha.com/blog/how-to-reduce-image-file-size-while-uploading-using-php-code/" style="background-color: rgb(255, 255, 255);">https://www.apptha.com/blog/how-to-reduce-image-file-size-while-uploading-using-php-code/</a><br></div><p></p>