---
layout : article
title: "Jupyter NoteBook 을 로컬환경에서 웹 서버로 구동할 때 과정, 필요한 사이트 "
aside:
  toc: true
tags: Web
category : Web
author: melonicedlatte
published : True
hellogohn_num : 34
key : 2017-01-25-145615
--- 

<p><span style="background-color: rgb(214, 239, 214);">jupyter</span> 는 웹 환경에서 구동되는 꽤 괜찮은 컴파일러? 같습니다.</p><p><span style="background-color: rgb(214, 239, 214);">jupyterhub</span> 라는 서버 구축 전용 어플리케이션이 있는 것 같기는 한데 ssh 인증 과정에서 어려움을 겪어서 저는 그냥 포기하고 jupyter 를 이용하여 홈 서버를 구축하였습니다.&nbsp;</p><p><br></p><p>개인적으로 포스팅을 할 수 있지만 현재 우분투 서버에 여러가지를 설치하기도 복잡하고 개인용 컴퓨터는 다른 곳에 있어서 아래와 같이 필요 정보들을 링크로 남기겠습니다.&nbsp;</p><p><br></p><p>1. 먼저 홈 네트워크에서 포트포워딩을 통해서 제가 원하는 포트로 jupyter 를 미리 할당해 둡니다.</p><p>출처 :&nbsp;<a href="http://programmerchoo.tistory.com/2">http://programmerchoo.tistory.com/2</a><a href="http://programmerchoo.tistory.com/2"></a></p><p>개인적으로는 netis 를 이용하여 구축하였으나 대부분 iptime 을 이용하시기 때문에 위의 링크로 참고하시면 좋을 것 같습니다.&nbsp;</p><p>이상하게 웹 서버는 잘 열리는데 윈도우 원격접속은 안되더라구요. </p><p>시간 엄청 썼는데, 나중에 다시 시도해 보려고 합니다.&nbsp;</p><p><br></p><p> </p><p>2. jupyter 를 설치하고&nbsp;</p><p><a href="http://goodtogreate.tistory.com/entry/IPython-Notebook-%EC%84%A4%EC%B9%98%EB%B0%A9%EB%B2%95">http://goodtogreate.tistory.com/entry/IPython-Notebook-%EC%84%A4%EC%B9%98%EB%B0%A9%EB%B2%95</a></p><p style="font-family: &quot;Ubuntu Condensed&quot;, &quot;Meiryo UI&quot;, &quot;Nanum Gothic&quot;; font-size: 14px; background-color: rgb(241, 241, 241); margin-top: 10px; margin-bottom: 15px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial;">Jupyter가 다중 kernel을 지원한다고 한다.<br>즉, python 2,3 모두를 지원 한다.</p><p style="font-family: &quot;Ubuntu Condensed&quot;, &quot;Meiryo UI&quot;, &quot;Nanum Gothic&quot;; font-size: 14px; background-color: rgb(241, 241, 241); margin-top: 15px; margin-bottom: 15px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial;">python2는&nbsp;<code style="border: 1px solid rgb(234, 234, 234); background-color: rgb(248, 248, 248); color: rgb(201, 0, 0); border-radius: 3px; padding: 1px 5px; margin: 0px; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; display: inline-block; white-space: nowrap;">pip</code>이고 python3은&nbsp;<code style="border: 1px solid rgb(234, 234, 234); background-color: rgb(248, 248, 248); color: rgb(201, 0, 0); border-radius: 3px; padding: 1px 5px; margin: 0px; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; display: inline-block; white-space: nowrap;">pip3</code>이다.</p><div class="highlight highlight-source-shell" style="font-family: &quot;Ubuntu Condensed&quot;, &quot;Meiryo UI&quot;, &quot;Nanum Gothic&quot;; font-size: 14px; margin: 0px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><pre style="padding: 6px 10px; margin-top: 15px; margin-bottom: 15px; max-width: 100%; font-stretch: normal; line-height: 19px; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; background-color: rgb(248, 248, 248); border-radius: 3px;">pip install jupyter</pre></div><p style="font-family: &quot;Ubuntu Condensed&quot;, &quot;Meiryo UI&quot;, &quot;Nanum Gothic&quot;; font-size: 14px; background-color: rgb(241, 241, 241); margin-top: 15px; margin-bottom: 15px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial;">실행 방법</p><div class="highlight highlight-source-shell" style="font-family: &quot;Ubuntu Condensed&quot;, &quot;Meiryo UI&quot;, &quot;Nanum Gothic&quot;; font-size: 14px; margin: 0px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><pre style="padding: 6px 10px; margin-top: 15px; margin-bottom: 15px; max-width: 100%; font-stretch: normal; line-height: 19px; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; background-color: rgb(248, 248, 248); border-radius: 3px;">jupyter notebook</pre></div><p>위와 같은 형태로 설치를 해준다. python3 버전을 사용하려면 pip -&gt; pip3 로 명령어를 사용한다.&nbsp;</p><p>실행방법은<span style="background-color: rgb(214, 239, 214);"> jupyter notebook </span>을 입력하면 된다. 바로 미리 config 파일에 입력 된 형태로 포트가 열리게 된다.&nbsp;</p><p>다만 귀찮은 점이라고 한다면 이는 백그라운드 실행 명령어가 아니기 때문에 terminal 을 계속 열어두어야 한다.&nbsp;</p><p><br></p><p>3. 단순히 열리기만 할 수는 없으니 서버로 설정해보자. (2와 출처 같음 )&nbsp;</p><p>포트포워딩도 되었고, 이제 포트만 설정해서 백그라운드에서 작동하게 해준다면 웹 서버가 됩니다.&nbsp;</p><p style="font-family: &quot;Ubuntu Condensed&quot;, &quot;Meiryo UI&quot;, &quot;Nanum Gothic&quot;; font-size: 14px; background-color: rgb(241, 241, 241); margin-top: 10px; margin-bottom: 15px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial;">우분투환경</p><p style="font-family: &quot;Ubuntu Condensed&quot;, &quot;Meiryo UI&quot;, &quot;Nanum Gothic&quot;; font-size: 14px; background-color: rgb(241, 241, 241); margin-top: 15px; margin-bottom: 15px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial;"><strong style="margin: 0px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial;">Securing a notebook server</strong></p><div class="highlight highlight-source-shell" style="font-family: &quot;Ubuntu Condensed&quot;, &quot;Meiryo UI&quot;, &quot;Nanum Gothic&quot;; font-size: 14px; margin: 0px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><pre style="padding: 6px 10px; margin-top: 15px; margin-bottom: 15px; max-width: 100%; font-stretch: normal; line-height: 19px; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; background-color: rgb(248, 248, 248); border-radius: 3px;">jupyter notebook --generate-config</pre></div><p style="font-family: &quot;Ubuntu Condensed&quot;, &quot;Meiryo UI&quot;, &quot;Nanum Gothic&quot;; font-size: 14px; background-color: rgb(241, 241, 241); margin-top: 15px; margin-bottom: 15px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial;">profile 생성없이 defalut내용을 바로 변경한다. 전체 Jupyter에 영향을 미친다.</p><div class="highlight highlight-source-shell" style="font-family: &quot;Ubuntu Condensed&quot;, &quot;Meiryo UI&quot;, &quot;Nanum Gothic&quot;; font-size: 14px; margin: 0px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><pre style="padding: 6px 10px; margin-top: 15px; margin-bottom: 15px; max-width: 100%; font-stretch: normal; line-height: 19px; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; background-color: rgb(248, 248, 248); border-radius: 3px;">Writing default config to: /root/.jupyter/jupyter_notebook_config.py</pre></div><p>위와 같은 명령어 <span style="background-color: rgb(214, 239, 214);">--generate-config &nbsp;</span>를 입력해주면 보이지 않는 <span style="background-color: rgb(214, 239, 214);">&nbsp;.jupyter</span> 디렉토리가 생성되고 그 안에 config 파일이 생성된다.</p><p>파일 위치를 기억해 두는게 좋을 것이다. 대부분 홈이나 루트를 통해서 생성되기 때문에 헷갈리면 두 곳에 가서 <span style="background-color: rgb(214, 239, 214);">cd .jupyter</span> 를 해주면 된다.&nbsp;</p><p>juptyer 의 기본 동작을 제어 하는 곳이기 때문에 설정을 몇 개 해야 할 필요가 있다.&nbsp;</p><p><br></p><p>다음으로는 <span style="background-color: rgb(214, 239, 214);">암호를 설정</span>해야 한다.&nbsp;</p><p>jupyter 는 내부의 디렉토리를 직접 사용하는 것이기 때문에 아무나 사용하면 안된다.</p><p>실제 우분투에 있는 <span style="background-color: rgb(214, 239, 214);">파일을 누구나 접근</span>해서 지울 수 있기 때문이다.&nbsp;</p><p><br></p><p>linux 에 python 이 깔려있다는 전제 하에서 </p><p><span style="background-color: rgb(214, 239, 214);">ipython </span>&nbsp;을 명령어로 입력한다.&nbsp;</p><p><strong style="font-family: &quot;Ubuntu Condensed&quot;, &quot;Meiryo UI&quot;, &quot;Nanum Gothic&quot;; font-size: 14px; margin: 0px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial;">Preparing a hashed passwrod</strong><br></p><div class="highlight highlight-source-python" style="font-family: &quot;Ubuntu Condensed&quot;, &quot;Meiryo UI&quot;, &quot;Nanum Gothic&quot;; font-size: 14px; margin: 0px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><pre style="padding: 6px 10px; margin-top: 15px; margin-bottom: 15px; max-width: 100%; font-stretch: normal; line-height: 19px; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; background-color: rgb(248, 248, 248); border-radius: 3px;">In [<span class="pl-c1" style="margin: 0px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial; color: rgb(0, 134, 179);">1</span>]: <span class="pl-k" style="margin: 0px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial; color: rgb(167, 29, 93);">from</span> notebook.auth <span class="pl-k" style="margin: 0px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial; color: rgb(167, 29, 93);">import</span> passwd

In [<span class="pl-c1" style="margin: 0px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial; color: rgb(0, 134, 179);">2</span>]: passwd()
Enter password: 
Verify password: 
Out[<span class="pl-c1" style="margin: 0px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial; color: rgb(0, 134, 179);">2</span>]: <span class="pl-s" style="margin: 0px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial; color: rgb(167, 29, 93);"><span class="pl-pds" style="margin: 0px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial; color: rgb(223, 80, 0);">'</span>sha1:f24baff49ac5:863dd2ae747212ede58125302d227f0ca7b12bb3<span class="pl-pds" style="margin: 0px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial; color: rgb(223, 80, 0);">'</span></span></pre></div><p><br></p><p>그 다음에는 위와 같이 명령어를 입력해주고 원하는 password 를 입력해서 sha1 로 암호화된 값을 얻는다.&nbsp;</p><p style="font-family: &quot;Ubuntu Condensed&quot;, &quot;Meiryo UI&quot;, &quot;Nanum Gothic&quot;; font-size: 14px; background-color: rgb(241, 241, 241); margin-top: 15px; margin-bottom: 15px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial;"><code style="border: 1px solid rgb(234, 234, 234); background-color: rgb(248, 248, 248); color: rgb(201, 0, 0); border-radius: 3px; padding: 1px 5px; margin: 0px; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; display: inline-block; white-space: nowrap;">jupyter_notebook_config.py</code>를 열어서 아래의 내용을 입력한다.</p><div class="highlight highlight-source-shell" style="font-family: &quot;Ubuntu Condensed&quot;, &quot;Meiryo UI&quot;, &quot;Nanum Gothic&quot;; font-size: 14px; margin: 0px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><pre style="padding: 6px 10px; margin-top: 15px; margin-bottom: 15px; max-width: 100%; font-stretch: normal; line-height: 19px; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; background-color: rgb(248, 248, 248); border-radius: 3px;"><span class="pl-c" style="margin: 0px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial; color: rgb(150, 152, 150);"># Password to use for web authentication</span>
c = <span class="pl-en" style="margin: 0px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial; color: rgb(121, 93, 163);">get_config</span>()
c.NotebookApp.password =
u<span class="pl-s" style="margin: 0px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial; color: rgb(167, 29, 93);"><span class="pl-pds" style="margin: 0px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial; color: rgb(223, 80, 0);">'</span>sha1:f24baff49ac5:863dd2ae747212ede58125302d227f0ca7b12bb3<span class="pl-pds" style="margin: 0px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial; color: rgb(223, 80, 0);">'</span></span></pre></div><p>암호화 된 값을 얻으면 &nbsp;<span style="background-color: rgb(214, 239, 214);">.jupyter / &nbsp;jupyter_notebook_config.py &nbsp;</span></p><p>경로로 가서 수정해준다.&nbsp;</p><p><br></p><p style="font-family: &quot;Ubuntu Condensed&quot;, &quot;Meiryo UI&quot;, &quot;Nanum Gothic&quot;; font-size: 14px; background-color: rgb(241, 241, 241); margin-top: 15px; margin-bottom: 15px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial;">서버 설정 내용을&nbsp;<code style="border: 1px solid rgb(234, 234, 234); background-color: rgb(248, 248, 248); color: rgb(201, 0, 0); border-radius: 3px; padding: 1px 5px; margin: 0px; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; display: inline-block; white-space: nowrap;">jupyter_notebook_config.py</code>를 열어서 아래의 내용을 입력한다.</p><div class="highlight highlight-source-shell" style="font-family: &quot;Ubuntu Condensed&quot;, &quot;Meiryo UI&quot;, &quot;Nanum Gothic&quot;; font-size: 14px; margin: 0px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><pre style="padding: 6px 10px; margin-top: 15px; margin-bottom: 15px; max-width: 100%; font-stretch: normal; line-height: 19px; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; background-color: rgb(248, 248, 248); border-radius: 3px;"><span class="pl-c" style="margin: 0px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial; color: rgb(150, 152, 150);"># The IP address the notebook server will listen on.</span>
<span class="pl-c" style="margin: 0px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial; color: rgb(150, 152, 150);"># c.NotebookApp.ip = 'localhost'</span>
c.NotebookApp.ip = <span class="pl-s" style="margin: 0px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial; color: rgb(167, 29, 93);"><span class="pl-pds" style="margin: 0px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial; color: rgb(223, 80, 0);">'</span>192.168.174.131<span class="pl-pds" style="margin: 0px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial; color: rgb(223, 80, 0);">'</span></span>
<span class="pl-c" style="margin: 0px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial; color: rgb(150, 152, 150);"># c.NotebookApp.port_retries = 50</span>
c.NotebookApp.port_retries = 8888</pre></div><p>다음으로는 위 내용을 config 파일에서 찾아서 수정해준다.&nbsp;</p><p>ip 는 자신의 ip 가 포트포워딩을 해야한다면 로컬 ip 로 아니라면 그냥 wan ip 로 입력하면 된다.&nbsp;</p><p>port 는 설정하기 나름이다.</p><p><br></p><p><br></p><p style="font-family: &quot;Ubuntu Condensed&quot;, &quot;Meiryo UI&quot;, &quot;Nanum Gothic&quot;; font-size: 14px; background-color: rgb(241, 241, 241); margin-top: 15px; margin-bottom: 15px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial;"><strong style="margin: 0px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial;">기타설정</strong></p><div class="highlight highlight-source-shell" style="font-family: &quot;Ubuntu Condensed&quot;, &quot;Meiryo UI&quot;, &quot;Nanum Gothic&quot;; font-size: 14px; margin: 0px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><pre style="padding: 6px 10px; margin-top: 15px; margin-bottom: 15px; max-width: 100%; font-stretch: normal; line-height: 19px; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; background-color: rgb(248, 248, 248); border-radius: 3px;"><span class="pl-c" style="margin: 0px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial; color: rgb(150, 152, 150);">#실행과 동시에 web-browser를 실행하지 않게 한다.</span>
c.NotebookApp.open_browser = False
<span class="pl-c" style="margin: 0px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial; color: rgb(150, 152, 150);">#시작 디렉터리를 변경한다.</span>
c.NotebookApp.notebook_dir = u<span class="pl-s" style="margin: 0px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial; color: rgb(167, 29, 93);"><span class="pl-pds" style="margin: 0px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial; color: rgb(223, 80, 0);">'</span>/root/DataScience/<span class="pl-pds" style="margin: 0px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial; color: rgb(223, 80, 0);">'</span></span></pre></div><p>기타로 설정해야 할 것은 위와 같은 것이 있다.&nbsp;</p><p>jupyter notebook 이 실행되면 자동으로 browser 가 실행되는 데 그걸 방지하는 설정,</p><p>notebook_dir 는 주피터의 시작 경로를 설정해주는 설정이다.</p><p>저 앞에 u 는 입력하지 않아도 되고 원하는 경로를 <span style="background-color: rgb(214, 239, 214);">루트를 시작으로 하여 해주어</span>야 한다.&nbsp;<br></p><p>home 으로 ( ~ / ) 설정했는데 안 된다.&nbsp;</p><p><br></p><p><br></p><pre style="font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; padding: 6px 10px; margin-top: 15px; margin-bottom: 15px; line-height: 19px; background-color: rgb(248, 248, 248); border-radius: 3px; max-width: 100%; font-stretch: normal;">서버를 백그라운드에서 시작하는 방법 <br class="Apple-interchange-newline">$ jupyter notebook&amp; --ip=자신의 ip:port </pre><p>위와 같이 명령어를 사용하면 열리게 된다.</p><p>단 &nbsp;<span style="background-color: rgb(214, 239, 214);">.jupyter / &nbsp;jupyter_notebook_config.py &nbsp;</span>&nbsp;파일에서 ip 와 포트를 설정해주었다면&nbsp;</p><p><br></p><pre style="font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; padding: 6px 10px; margin-top: 15px; margin-bottom: 15px; line-height: 19px; background-color: rgb(248, 248, 248); border-radius: 3px; max-width: 100%; font-stretch: normal;">$ jupyter notebook&amp;</pre><p>까지만 실행해 주면 된다.&nbsp;</p><p><br></p><p><br></p><p><br></p><p>- 백그라운드로 돌아가고 있는 jupyter notebook 을 끄는 방법&nbsp;</p><p><a href="http://stackoverflow.com/questions/38511673/cannot-quit-jupyter-notebook-server-running">http://stackoverflow.com/questions/38511673/cannot-quit-jupyter-notebook-server-running</a><a href="http://stackoverflow.com/questions/38511673/cannot-quit-jupyter-notebook-server-running"></a></p><p>위의 링크에 잘 나와있지만 간단히 정리해본다면&nbsp;</p><p><span style="color: rgb(36, 39, 41); font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; font-size: 13px; white-space: pre-wrap; background-color: rgb(239, 240, 241);">netstat -tulpn</span></p><p>위의 명령어를 사용해서 현재 작동하는 PID 를 확인하고</p><p>kill ~~~ 를 이용해서 그 PID 를 끄면 됩니다.&nbsp;</p>