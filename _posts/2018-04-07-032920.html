---
layout : article
title: "Android 에서 Opencv 설치하고 간단한 예제 실행해보기!!"
aside:
  toc: true
tags: Android
category : Android
author: melonicedlatte
published : True
hellogohn_num : 271
key : 2018-04-07-032920
--- 

<p><a href="http://webnautes.tistory.com/1054">http://webnautes.tistory.com/1054</a>&nbsp;<br>블로그에 있는 포스팅을 따라 하면서 opencv 를 설치하겠습니다.</p><p><br>들어가기 전에 용어를 정리하겠습니다~</p><p><span style="background-color: rgb(255, 239, 198);">NDK&nbsp;</span>:&nbsp;&nbsp;<span style="font-size: 18px; color: rgba(0, 0, 0, 0.68); font-family: Roboto, sans-serif;">NDK(Native Development Kit)는 Android 앱에서&nbsp;</span><span style="font-size: 18px; color: rgba(0, 0, 0, 0.68); font-family: Roboto, sans-serif; background-color: rgb(255, 239, 198);">C 및 C++ 코드를 활용할 수 있게 해주는 도구 집합</span><span style="color: rgba(0, 0, 0, 0.68); font-family: Roboto, sans-serif;"><span style="font-size: 16px;"><span style="font-size: 18px;">입니다. NDK를 사용하여 자신의 소스 코드로 앱을 빌드하거나 기존의 미리 빌드된 라이브러리를 이용할 수 있습니다.</span><br></span></span><span style="color: rgba(0, 0, 0, 0.68); font-family: Roboto, sans-serif; font-size: 18px;">NDK는 대부분의 초보 Android 프로그래머에게는 알맞지 않고, 대부분의 Android 앱 유형에는 별다른 가치가 없습니다. NDK를 사용하면 개발 프로세스가 불가피하게 복잡해지는데, 그런 단점을 감수하고 굳이 NDK를 사용하지 않아도 되는 경우가 많습니다. 하지만 다음과 같이 하려는 경우에는 유용할 수 있습니다.</span></p><div class="jd-descr " itemprop="articleBody" style="color: rgba(0, 0, 0, 0.68); font-family: Roboto, sans-serif; font-size: 14px;"><div id="jd-content"><div class="jd-descr" itemprop="articleBody"><ul style="margin-right: 0px; margin-bottom: 15px; margin-left: 20px; padding: 0px;"><li style="margin-bottom: 12px;"><span style="font-size: 18px;">게임이나 물리학 시뮬레이션처럼 계산 집약적인 애플리케이션을 위해 기기의 성능을 조금이라도 더 짜내야 하는 경우</span></li><li style="margin-bottom: 12px;"><span style="font-size: 18px;">자신이나 다른 개발자의 C 또는 C++ 라이브러리를 재사용해야 하는 경우</span></li></ul></div></div></div><p>OpenCV는 c/c++ or python 을 이용하기 때문에, c/c++ library를 가져오기 위해서 NDK 가 필요합니다.&nbsp;</p><p><br></p><p>CMake :&nbsp;<b style="color: rgb(34, 34, 34); font-family: sans-serif; font-size: 14px;"><span style="font-size: 18px;">CMake</span></b><span style="color: rgb(34, 34, 34); font-family: sans-serif; font-size: 18px;">(Cross Platform Make)는 멀티플랫폼으로 사용할 수 있는&nbsp;</span><a href="https://ko.wikipedia.org/wiki/Make" class="mw-redirect mw-disambig" title="Make" style="background: none rgb(255, 255, 255); color: rgb(11, 0, 128); font-family: sans-serif; font-size: 14px;"><span style="font-size: 18px;">Make</span></a><span style="color: rgb(34, 34, 34); font-family: sans-serif; font-size: 18px;">의 대용품을 만들기 위한 오픈소스 프로젝트로&nbsp;</span><a href="https://ko.wikipedia.org/w/index.php?title=%ED%82%A4%ED%8A%B8%EC%9B%A8%EC%96%B4&amp;action=edit&amp;redlink=1" class="new" title="키트웨어 (없는 문서)" style="background: none rgb(255, 255, 255); color: rgb(165, 88, 88); font-family: sans-serif; font-size: 14px;"><span style="font-size: 18px;">키트웨어</span></a><span style="color: rgb(34, 34, 34); font-family: sans-serif; font-size: 18px;">와&nbsp;</span><a href="https://ko.wikipedia.org/w/index.php?title=%EC%9D%B8%EC%82%AC%EC%9D%B4%ED%8A%B8_%EC%BD%98%EC%86%94%ED%8B%B0%EC%97%84&amp;action=edit&amp;redlink=1" class="new" title="인사이트 콘솔티엄 (없는 문서)" style="background: none rgb(255, 255, 255); color: rgb(165, 88, 88); font-family: sans-serif; font-size: 14px;"><span style="font-size: 18px;">인사이트 콘솔티엄</span></a><span style="color: rgb(34, 34, 34); font-family: sans-serif; font-size: 18px;">에서 만들었다. 스스로 기존의 Make의 과정을 수행하지는 않고 지정한 운영 체제에 맞는 Make 파일(</span><a href="https://ko.wikipedia.org/wiki/%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C%EC%86%8C%ED%94%84%ED%8A%B8_%EC%9C%88%EB%8F%84" class="mw-redirect" title="마이크로소프트 윈도" style="background: none rgb(255, 255, 255); color: rgb(11, 0, 128); font-family: sans-serif; font-size: 14px;"><span style="font-size: 18px;">마이크로소프트 윈도</span></a><span style="color: rgb(34, 34, 34); font-family: sans-serif; font-size: 18px;">에서는 솔루션 파일)의 생성만을 수행하기 때문에 Meta Make라고도 불린다. 가장 큰 이점은&nbsp;</span><a href="https://ko.wikipedia.org/wiki/%EC%9C%A0%EB%8B%89%EC%8A%A4_%EA%B3%84%EC%97%B4" title="유닉스 계열" style="background: none rgb(255, 255, 255); color: rgb(11, 0, 128); font-family: sans-serif; font-size: 14px;"><span style="font-size: 18px;">유닉스 계열</span></a><span style="color: rgb(34, 34, 34); font-family: sans-serif; font-size: 18px;">&nbsp;OS 중심이던 기존의 Make와는 달리 한번 작성해 두면 유닉스 계열은 물론, 마이크로소프트 윈도 계열의 프로그래밍 도구도 지원한다는 것이다.</span></p><p><br></p><p><br></p><p><br></p><p><br></p><p><span style="font-size: 24px;">- 설치 시작&nbsp;</span></p><p><img src="http://hellogohn.com/system/uploads/images/000/000/961/original/image.png?1523023640" style="width: 919.602px; height: 686px;"><br></p><p>프로젝트 생성을 하면서 Include C++ support 를 체크합니다.</p><p><br></p><p><br></p><p><img src="http://hellogohn.com/system/uploads/images/000/000/962/original/image.png?1523023843" style="width: 952.223px; height: 718px;"><br></p><p>플랫폼은 14 이상이 필요하다고 합니다.&nbsp;&nbsp;</p><p><br></p><p><br></p><p><img src="http://hellogohn.com/system/uploads/images/000/000/963/original/image.png?1523023862" style="width: 894.133px; height: 671px;"><br></p><p>Empty Activity 를 생성한다.&nbsp;</p><p><br></p><p><br></p><p><img src="http://hellogohn.com/system/uploads/images/000/000/964/original/image.png?1523023970" style="width: 916.306px; height: 686px;"><br></p><p>default 값으로 두고 Next</p><p><br></p><p><br></p><p><br></p><p><img src="http://hellogohn.com/system/uploads/images/000/000/965/original/image.png?1523024060" style="width: 921.414px; height: 689px;"><br></p><p>모두 체크해주고 다음으로~ 가면 컴포넌트들을 설치합니다.&nbsp;</p><p><br></p><p><br></p><p>용량이 커서 오래 걸리기 때문에 기다립니다</p><p>설치가 된 상태에서 바로 빌드하면 아래와 같은 결과물이 나오게 됩니다.&nbsp;<br>Hello from c++ 이 나오게 되네요.&nbsp;<br><br><img src="http://hellogohn.com/system/uploads/images/000/000/967/original/KakaoTalk_Photo_2018-04-07-00-53-04.jpeg?1523030013" style="width: 279.5px;"><br></p><p><br></p><p><br></p><p><br></p><p><img src="http://hellogohn.com/system/uploads/images/000/000/968/original/image.png?1523030699" style="width: 279.5px;"><br></p><p>안드로이드의 구조를 보면 cpp 폴더가 하나 더 생겼습니다.&nbsp;<br><br></p><pre style="font-family: Arial, &quot;Spoqa Han Sans&quot;, &quot;Spoqa Han Sans JP&quot;, 나눔바른고딕, 나눔고딕, &quot;맑은 고딕&quot;, &quot;Malgun Gothic&quot;, &quot;Apple SD 산돌고딕 Neo&quot;, AppleSDGothicNeo, sans-serif; font-size: 14px; margin-top: 0pt; margin-bottom: 0pt; line-height: 1.38; padding-top: 0px !important; padding-bottom: 0px !important;"><br><p dir="ltr" style="margin-top: 0pt; margin-bottom: 0pt; line-height: 1.38; color: rgb(0, 0, 0); white-space: normal; padding-top: 0px !important; padding-bottom: 0px !important;"><span style="font-size: 11pt; font-family: Arial; font-variant-numeric: normal; font-variant-east-asian: normal; vertical-align: baseline; white-space: pre-wrap;"><a href="http://webnautes.tistory.com/1054">멈춤보단 천천히라도</a>

안드로이드 스튜디오에서 CMake를 사용하여 C/C++ 코드를 컴파일 및 디버그하기 위해서는 다음 3가지가 필요합니다.</span></p><p dir="ltr" style="margin-top: 0pt; margin-bottom: 0pt; line-height: 1.38; color: rgb(0, 0, 0); white-space: normal; padding-top: 0px !important; padding-bottom: 0px !important;"><br></p><ul style="margin-top: 0pt; margin-bottom: 0pt; color: rgb(0, 0, 0); white-space: normal;"><li dir="ltr" style="list-style-type: disc; font-size: 11pt; font-family: Arial; font-weight: 700; font-variant-numeric: normal; font-variant-east-asian: normal; vertical-align: baseline; white-space: pre;"><p dir="ltr" style="margin-top: 0pt; margin-bottom: 0pt; line-height: 1.38; padding-top: 0px !important; padding-bottom: 0px !important;"><span style="font-size: 11pt; font-variant-numeric: normal; font-variant-east-asian: normal; vertical-align: baseline; white-space: pre-wrap;">The Android Native Development Kit (NDK)</span></p></li></ul><p dir="ltr" style="margin-top: 0pt; margin-bottom: 0pt; line-height: 1.38; color: rgb(0, 0, 0); white-space: normal; text-indent: 36pt; padding-top: 0px !important; padding-bottom: 0px !important;"><span style="font-size: 11pt; font-family: Arial; font-variant-numeric: normal; font-variant-east-asian: normal; vertical-align: baseline; white-space: pre-wrap;">안드로이드에서 JAVA 코드와 C/C++ 코드를 같이 사용할 수 있게 해줍니다.</span></p><ul style="margin-top: 0pt; margin-bottom: 0pt; color: rgb(0, 0, 0); white-space: normal;"><li dir="ltr" style="list-style-type: disc; font-size: 11pt; font-family: Arial; font-weight: 700; font-variant-numeric: normal; font-variant-east-asian: normal; vertical-align: baseline; white-space: pre;"><p dir="ltr" style="margin-top: 0pt; margin-bottom: 0pt; line-height: 1.38; padding-top: 0px !important; padding-bottom: 0px !important;"><span style="font-size: 11pt; font-variant-numeric: normal; font-variant-east-asian: normal; vertical-align: baseline; white-space: pre-wrap;">CMake</span></p></li></ul><p dir="ltr" style="margin-top: 0pt; margin-bottom: 0pt; line-height: 1.38; color: rgb(0, 0, 0); white-space: normal; text-indent: 36pt; padding-top: 0px !important; padding-bottom: 0px !important;"><span style="font-size: 11pt; font-family: Arial; font-variant-numeric: normal; font-variant-east-asian: normal; vertical-align: baseline; white-space: pre-wrap;">C/C++ 코드를 컴파일하여 네이티브 라이브러리 파일로 만들기 위해 사용됩니다.</span></p><ul style="margin-top: 0pt; margin-bottom: 0pt; color: rgb(0, 0, 0); white-space: normal;"><li dir="ltr" style="list-style-type: disc; font-size: 11pt; font-family: Arial; font-weight: 700; font-variant-numeric: normal; font-variant-east-asian: normal; vertical-align: baseline; white-space: pre;"><p dir="ltr" style="margin-top: 0pt; margin-bottom: 0pt; line-height: 1.38; padding-top: 0px !important; padding-bottom: 0px !important;"><span style="font-size: 11pt; font-variant-numeric: normal; font-variant-east-asian: normal; vertical-align: baseline; white-space: pre-wrap;">LLDB</span></p></li></ul><p dir="ltr" style="margin-top: 0pt; margin-bottom: 0pt; line-height: 1.38; color: rgb(0, 0, 0); white-space: normal; text-indent: 36pt; padding-top: 0px !important; padding-bottom: 0px !important;"><span style="font-size: 11pt; font-family: Arial; font-variant-numeric: normal; font-variant-east-asian: normal; vertical-align: baseline; white-space: pre-wrap;">C/C++ 코드를 디버그하기 위해 사용되는 디버거입니다. </span><span style="font-size: 11pt; font-family: Arial; color: rgb(255, 0, 0); font-variant-numeric: normal; font-variant-east-asian: normal; vertical-align: baseline; white-space: pre-wrap;">설치해주면 예전에 잡히지 않았던 에러나</span></p><p dir="ltr" style="margin-top: 0pt; margin-bottom: 0pt; line-height: 1.38; color: rgb(0, 0, 0); white-space: normal; padding-top: 0px !important; padding-bottom: 0px !important;"><span style="font-size: 11pt; font-family: Arial; color: rgb(255, 0, 0); font-variant-numeric: normal; font-variant-east-asian: normal; vertical-align: baseline; white-space: pre-wrap;"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;예외상황이 검출되며 에러 발생한 C/C++ 코드 위치를 알려줍니다.</span></p><div><span style="font-size: 11pt; font-family: Arial; color: rgb(255, 0, 0); background-color: transparent; font-variant-numeric: normal; font-variant-east-asian: normal; vertical-align: baseline; white-space: pre-wrap;"><br></span></div></pre><div><span style="font-size: 11pt; font-family: Arial; color: rgb(255, 0, 0); background-color: transparent; font-variant-numeric: normal; font-variant-east-asian: normal; vertical-align: baseline; white-space: pre-wrap;"><br></span></div><p>제가 설치를 동일하게 진행한 블로그에서 설명하는 바로는 3개의 파일이 필요하다고 합니다.&nbsp;<br>Tools -&gt; SDK Manager 에서 Android SDK -&gt; SDK Tools&nbsp;<br><br><img src="http://hellogohn.com/system/uploads/images/000/000/969/original/image.png?1523032930" style="width: 349px; height: 385.146px;"><br></p><p><br></p><p><img src="http://hellogohn.com/system/uploads/images/000/000/970/original/image.png?1523033100" style="width: 1118px;"><br></p><p><img src="http://hellogohn.com/system/uploads/images/000/000/971/original/image.png?1523033126" style="width: 1118px;"><br></p><p><br>3가지를 선택해서 설치가 되지 않은 경우 설치를 진행해줍니다.&nbsp;</p><p><br></p><p>이제 프로젝트에 OpenCV의 라이브러리를 추가해야 합니다.&nbsp;<br>https://github.com/opencv/opencv/releases 에서 OpenCV 라이브러리를 다운로드 받습니다<br></p><p><img src="http://hellogohn.com/system/uploads/images/000/000/972/original/image.png?1523033349" style="width: 1118px;"><br></p><p>제가 설치할 때의 버전은 3.4.1 입니다.&nbsp;<br>맨 위에 있는 opencv-3.4.1-android-sdk.zip 을 설치합니다.&nbsp;</p><p><br></p><p><br></p><p><br></p><p><img src="http://hellogohn.com/system/uploads/images/000/000/973/original/image.png?1523033721" style="width: 841.516px; height: 209.25px;"><br></p><p>File -&gt; New -&gt; Import Module.. 에 들어가서&nbsp;</p><p><br></p><p><br></p><p><img src="http://hellogohn.com/system/uploads/images/000/000/974/original/image.png?1523033809" style="width: 900px; height: 761.538px;"><br></p><p>파일이 다운로드 된 디렉토리에 가서 /sdk/java 폴더를 선택합니다.&nbsp;<br>제대로 선택하면 Module name 이 자동으로 생성됩니다.&nbsp;</p><p><br></p><p><br></p><p><img src="http://hellogohn.com/system/uploads/images/000/000/975/original/image.png?1523033890" style="width: 823.217px; height: 688.469px;"><br></p><p>모두 default 상태로 놓고 Finish를 클릭합니다.&nbsp;</p><p><br></p><p><br></p><p><img src="http://hellogohn.com/system/uploads/images/000/000/976/original/image.png?1523034179" style="width: 279.5px;"><br></p><p>설정을 Project 패널은 Project로 하면 openCVLibarary341이 추가된 것을 확인할 수 있다.&nbsp;</p><p><br></p><p><br></p><p><img src="http://hellogohn.com/system/uploads/images/000/000/977/original/image.png?1523034313" style="width: 559px;"><br></p><p>다시 Project 패널을 Android로 해도 openCVLibrary를 확인할 수 있다.&nbsp;<br>gradle도 추가되었다.&nbsp;<br></p><p><br></p><p><br></p><p><img src="http://hellogohn.com/system/uploads/images/000/000/978/original/image.png?1523034463" style="width: 1118px;"><br></p><p>openCVLibrary341 에 보면 compileSdkVersion 을 최소 21로 하는 것을 권장한다.&nbsp;<br><br><br></p><p><img src="http://hellogohn.com/system/uploads/images/000/000/979/original/image.png?1523034527" style="width: 559px;"><br></p><p>SdkVersion 21 은 안드로이드 5.0 버전인데, 현재는 7.0 누가폰을 많이 사용합니다.&nbsp;</p><p><br><br></p><p><img src="http://hellogohn.com/system/uploads/images/000/000/980/original/image.png?1523034654" style="width: 790.927px; height: 357.969px;"><br></p><p>그냥 21로 바꿔줘도 무리 없을 듯 해서 변경했습니다.&nbsp;&nbsp;<br></p><p><br></p><p><br></p><p><img src="http://hellogohn.com/system/uploads/images/000/000/981/original/image.png?1523034836" style="width: 307.329px; height: 254px;"><br></p><p>File -&gt; Project Structure 를 클릭합니다.</p><p><br></p><p><br></p><p><img src="http://hellogohn.com/system/uploads/images/000/000/982/original/image.png?1523034965" style="width: 702.948px; height: 586px;"><br></p><p>app -&gt; Dependencies 에서 + 버튼을 눌러서 Module dependency 를 클릭합니다.&nbsp;<br></p><p><br></p><p><br></p><p><img src="http://hellogohn.com/system/uploads/images/000/000/983/original/image.png?1523035009" style="width: 559px;"><br></p><p>openCVLibrary가 하나 있습니다 ! 클릭해주세요 !&nbsp;</p><p><br></p><p><br></p><p><img src="http://hellogohn.com/system/uploads/images/000/000/984/original/image.png?1523035053" style="width: 843.833px; height: 286.812px;"><br></p><p>이제 openCV 모듈을 사용할 수 있습니다 !!&nbsp;</p><p><br></p><p><br></p><p>Project 패널을 project 로 설정합니다.&nbsp;</p><p>아까 설치한 OpenCV 라이브러리에서 OpenCV-android-sdk/sdk/native/libs 폴더를 복사해서&nbsp;<br></p><p><img src="http://hellogohn.com/system/uploads/images/000/000/986/original/image.png?1523035765" style="width: 669px; height: 216.617px;"><br></p><p><br></p><p>app/src 폴더 채로&nbsp; JniLibs라는 이름으로 설정하여 붙여넣습니다.&nbsp;</p><p><img src="/system/uploads/images/000/000/992/original/image.png?1523041636" style="width: 310px; height: 260.346px;"><br></p><p><img src="http://hellogohn.com/system/uploads/images/000/000/987/original/image.png?1523035861" style="width: 691.697px; height: 231.391px;"><br></p><p><br></p><p><br></p><p><br></p><p>이제 기본적인 설정은 다 끝났습니다!!<br>res/values/styles.xml 의 기본 설정은 아래와 같습니다.</p><pre style="font-family: Menlo; font-size: 9pt; line-height: 1.42857; color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);">&lt;<span style="color: rgb(0, 0, 128); font-weight: bold;">resources</span>&gt;<br><br>    <span style="color: rgb(128, 128, 128); font-style: italic;">&lt;!-- Base application theme. --&gt;<br></span><span style="color: rgb(128, 128, 128); font-style: italic;">    </span>&lt;<span style="color: rgb(0, 0, 128); font-weight: bold;">style </span><span style="color: rgb(0, 0, 255); font-weight: bold;">name=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"AppTheme" </span><span style="color: rgb(0, 0, 255); font-weight: bold;">parent=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"Theme.AppCompat.Light.<strike>DarkActionBar</strike>"</span>&gt;<br>        <span style="color: rgb(128, 128, 128); font-style: italic;">&lt;!-- Customize your theme here. --&gt;<br></span><span style="color: rgb(128, 128, 128); font-style: italic;">        </span>&lt;<span style="color: rgb(0, 0, 128); font-weight: bold;">item </span><span style="color: rgb(0, 0, 255); font-weight: bold;">name=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"colorPrimary"</span>&gt;@color/colorPrimary&lt;/<span style="color: rgb(0, 0, 128); font-weight: bold;">item</span>&gt;<br>        &lt;<span style="color: rgb(0, 0, 128); font-weight: bold;">item </span><span style="color: rgb(0, 0, 255); font-weight: bold;">name=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"colorPrimaryDark"</span>&gt;@color/colorPrimaryDark&lt;/<span style="color: rgb(0, 0, 128); font-weight: bold;">item</span>&gt;<br>        &lt;<span style="color: rgb(0, 0, 128); font-weight: bold;">item </span><span style="color: rgb(0, 0, 255); font-weight: bold;">name=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"colorAccent"</span>&gt;@color/colorAccent&lt;/<span style="color: rgb(0, 0, 128); font-weight: bold;">item</span>&gt;<br>    &lt;/<span style="color: rgb(0, 0, 128); font-weight: bold;">style</span>&gt;<br><br>&lt;/<span style="color: rgb(0, 0, 128); font-weight: bold;">resources</span>&gt;<br></pre><p>아래와 같이 변경해줍니다.&nbsp;</p><pre style="font-family: Menlo; font-size: 9pt; line-height: 1.42857; color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);">&lt;<span style="color: rgb(0, 0, 128); font-weight: bold;">resources</span>&gt;<br><br>    <span style="color: rgb(128, 128, 128); font-style: italic;">&lt;!-- Base application theme. --&gt;<br></span><span style="color: rgb(128, 128, 128); font-style: italic;">    </span>&lt;<span style="color: rgb(0, 0, 128); font-weight: bold;">style </span><span style="color: rgb(0, 0, 255); font-weight: bold;">name=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"AppTheme" </span><span style="color: rgb(0, 0, 255); font-weight: bold;">parent=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"Theme.AppCompat.Light.NoActionBar"</span>&gt;<br>        <span style="color: rgb(128, 128, 128); font-style: italic;">&lt;!-- Customize your theme here. --&gt;<br></span><span style="color: rgb(128, 128, 128); font-style: italic;">        </span>&lt;<span style="color: rgb(0, 0, 128); font-weight: bold;">item </span><span style="color: rgb(0, 0, 255); font-weight: bold;">name=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"colorPrimary"</span>&gt;@color/colorPrimary&lt;/<span style="color: rgb(0, 0, 128); font-weight: bold;">item</span>&gt;<br>        &lt;<span style="color: rgb(0, 0, 128); font-weight: bold;">item </span><span style="color: rgb(0, 0, 255); font-weight: bold;">name=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"colorPrimaryDark"</span>&gt;@color/colorPrimaryDark&lt;/<span style="color: rgb(0, 0, 128); font-weight: bold;">item</span>&gt;<br>        &lt;<span style="color: rgb(0, 0, 128); font-weight: bold;">item </span><span style="color: rgb(0, 0, 255); font-weight: bold;">name=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"colorAccent"</span>&gt;@color/colorAccent&lt;/<span style="color: rgb(0, 0, 128); font-weight: bold;">item</span>&gt;<br>    &lt;/<span style="color: rgb(0, 0, 128); font-weight: bold;">style</span>&gt;<br><br>&lt;/<span style="color: rgb(0, 0, 128); font-weight: bold;">resources</span>&gt;<br></pre><p><br></p><p><br></p><p><br></p><p>다음으로는 AndroidManifest.xml 입니다. 아래와 같은 소스를&nbsp;</p><pre style="font-family: Menlo; font-size: 9pt; line-height: 1.42857; color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);"><span style="font-style: italic;">&lt;?</span><span style="color: rgb(0, 0, 255); font-weight: bold;">xml version=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"1.0" </span><span style="color: rgb(0, 0, 255); font-weight: bold;">encoding=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"utf-8"</span><span style="font-style: italic;">?&gt;<br></span>&lt;<span style="color: rgb(0, 0, 128); font-weight: bold;">manifest </span><span style="color: rgb(0, 0, 255); font-weight: bold;">xmlns:</span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"http://schemas.android.com/apk/res/android"<br></span><span style="color: rgb(0, 128, 0); font-weight: bold;">    </span><span style="color: rgb(0, 0, 255); font-weight: bold;">package=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"com.opencv.gohn.android_opencv"</span>&gt;<br><br>    &lt;<span style="color: rgb(0, 0, 128); font-weight: bold;">application<br></span><span style="color: rgb(0, 0, 128); font-weight: bold;">        </span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">:allowBackup=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"true"<br></span><span style="color: rgb(0, 128, 0); font-weight: bold;">        </span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">:icon=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"@mipmap/ic_launcher"<br></span><span style="color: rgb(0, 128, 0); font-weight: bold;">        </span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">:label=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"@string/app_name"<br></span><span style="color: rgb(0, 128, 0); font-weight: bold;">        </span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">:roundIcon=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"@mipmap/ic_launcher_round"<br></span><span style="color: rgb(0, 128, 0); font-weight: bold;">        </span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">:supportsRtl=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"true"<br></span><span style="color: rgb(0, 128, 0); font-weight: bold;">        </span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">:theme=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"@style/AppTheme"</span>&gt;<br>        &lt;<span style="color: rgb(0, 0, 128); font-weight: bold;">activity </span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">:name=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">".MainActivity"</span>&gt;<br>            &lt;<span style="color: rgb(0, 0, 128); font-weight: bold;">intent-filter</span>&gt;<br>                &lt;<span style="color: rgb(0, 0, 128); font-weight: bold;">action </span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">:name=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"android.intent.action.MAIN" </span>/&gt;<br><br>                &lt;<span style="color: rgb(0, 0, 128); font-weight: bold;">category </span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">:name=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"android.intent.category.LAUNCHER" </span>/&gt;<br>            &lt;/<span style="color: rgb(0, 0, 128); font-weight: bold;">intent-filter</span>&gt;<br>        &lt;/<span style="color: rgb(0, 0, 128); font-weight: bold;">activity</span>&gt;<br>    &lt;/<span style="color: rgb(0, 0, 128); font-weight: bold;">application</span>&gt;<br><br>&lt;/<span style="color: rgb(0, 0, 128); font-weight: bold;">manifest</span>&gt;</pre><p>분홍색 소스코드를 추가해서 아래와 같이 만들어줍니다.&nbsp;<br>카메라에 대한 퍼미션과 조건을 설정해주는 단계입니다.&nbsp;</p><pre style="font-family: Menlo; font-size: 9pt; line-height: 1.42857; background-color: rgb(255, 255, 255);"><span style="color: rgb(0, 0, 0); font-style: italic;">&lt;?</span><span style="color: rgb(0, 0, 255); font-weight: bold;">xml version=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"1.0" </span><span style="color: rgb(0, 0, 255); font-weight: bold;">encoding=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"utf-8"</span><span style="color: rgb(0, 0, 0); font-style: italic;">?&gt;<br></span><font color="#000000">&lt;</font><span style="color: rgb(0, 0, 128); font-weight: bold;">manifest </span><span style="color: rgb(0, 0, 255); font-weight: bold;">xmlns:</span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"http://schemas.android.com/apk/res/android"<br></span><span style="color: rgb(0, 128, 0); font-weight: bold;">    </span><span style="color: rgb(0, 0, 255); font-weight: bold;">package=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"com.opencv.gohn.android_opencv"</span><font color="#000000">&gt;</font><font color="#ff00ff"><br><br>    &lt;<span style="font-weight: bold;">uses-permission </span><span style="font-weight: bold;">android</span><span style="font-weight: bold;">:name=</span><span style="font-weight: bold;">"android.permission.CAMERA"</span>/&gt;<br>    &lt;<span style="font-weight: bold;">uses-feature </span><span style="font-weight: bold;">android</span><span style="font-weight: bold;">:name=</span><span style="font-weight: bold;">"android.hardware.camera" </span><span style="font-weight: bold;">android</span><span style="font-weight: bold;">:required=</span><span style="font-weight: bold;">"false"</span>/&gt;<br>    &lt;<span style="font-weight: bold;">uses-feature </span><span style="font-weight: bold;">android</span><span style="font-weight: bold;">:name=</span><span style="font-weight: bold;">"android.hardware.camera.autofocus" </span><span style="font-weight: bold;">android</span><span style="font-weight: bold;">:required=</span><span style="font-weight: bold;">"false"</span>/&gt;<br>    &lt;<span style="font-weight: bold;">uses-feature </span><span style="font-weight: bold;">android</span><span style="font-weight: bold;">:name=</span><span style="font-weight: bold;">"android.hardware.camera.front" </span><span style="font-weight: bold;">android</span><span style="font-weight: bold;">:required=</span><span style="font-weight: bold;">"false"</span>/&gt;<br>    &lt;<span style="font-weight: bold;">uses-feature </span><span style="font-weight: bold;">android</span><span style="font-weight: bold;">:name=</span><span style="font-weight: bold;">"android.hardware.camera.front.autofocus"  </span><span style="font-weight: bold;">android</span><span style="font-weight: bold;">:required=</span><span style="font-weight: bold;">"false"</span>/&gt;<br><br>    &lt;<span style="font-weight: bold;">supports-screens </span><span style="font-weight: bold;">android</span><span style="font-weight: bold;">:resizeable=</span><span style="font-weight: bold;">"true"<br></span><span style="font-weight: bold;">        </span><span style="font-weight: bold;">android</span><span style="font-weight: bold;">:smallScreens=</span><span style="font-weight: bold;">"true"<br></span><span style="font-weight: bold;">        </span><span style="font-weight: bold;">android</span><span style="font-weight: bold;">:normalScreens=</span><span style="font-weight: bold;">"true"<br></span><span style="font-weight: bold;">        </span><span style="font-weight: bold;">android</span><span style="font-weight: bold;">:largeScreens=</span><span style="font-weight: bold;">"true"<br></span><span style="font-weight: bold;">        </span><span style="font-weight: bold;">android</span><span style="font-weight: bold;">:anyDensity=</span><span style="font-weight: bold;">"true" </span>/&gt;<br></font><font color="#000000"><br>    &lt;</font><span style="color: rgb(0, 0, 128); font-weight: bold;">application<br></span><span style="color: rgb(0, 0, 128); font-weight: bold;">        </span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">:allowBackup=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"true"<br></span><span style="color: rgb(0, 128, 0); font-weight: bold;">        </span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">:icon=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"@mipmap/ic_launcher"<br></span><span style="color: rgb(0, 128, 0); font-weight: bold;">        </span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">:label=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"@string/app_name"<br></span><span style="color: rgb(0, 128, 0); font-weight: bold;">        </span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">:roundIcon=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"@mipmap/ic_launcher_round"<br></span><span style="color: rgb(0, 128, 0); font-weight: bold;">        </span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">:supportsRtl=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"true"<br></span><span style="color: rgb(0, 128, 0); font-weight: bold;">        </span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">:theme=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"@style/AppTheme"</span><font color="#000000">&gt;<br>        &lt;</font><span style="color: rgb(0, 0, 128); font-weight: bold;">activity </span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">:name=</span><span style="font-weight: bold;"><font color="#008000">".MainActivity"</font><font color="#ff00ff"><br></font></span><font color="#ff00ff"><span style="font-weight: bold;">            </span><span style="font-weight: bold;">android</span><span style="font-weight: bold;">:screenOrientation=</span><span style="font-weight: bold;">"landscape"<br></span><span style="font-weight: bold;">            </span><span style="font-weight: bold;">android</span><span style="font-weight: bold;">:configChanges=</span><span style="font-weight: bold;">"keyboardHidden|orientation"</span></font><font color="#000000">&gt;<br>            &lt;</font><span style="color: rgb(0, 0, 128); font-weight: bold;">intent-filter</span><font color="#000000">&gt;<br>                &lt;</font><span style="color: rgb(0, 0, 128); font-weight: bold;">action </span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">:name=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"android.intent.action.MAIN" </span><font color="#000000">/&gt;<br><br>                &lt;</font><span style="color: rgb(0, 0, 128); font-weight: bold;">category </span><span style="color: rgb(102, 14, 122); font-weight: bold;">android</span><span style="color: rgb(0, 0, 255); font-weight: bold;">:name=</span><span style="color: rgb(0, 128, 0); font-weight: bold;">"android.intent.category.LAUNCHER" </span><font color="#000000">/&gt;<br>            &lt;/</font><span style="color: rgb(0, 0, 128); font-weight: bold;">intent-filter</span><font color="#000000">&gt;<br>        &lt;/</font><span style="color: rgb(0, 0, 128); font-weight: bold;">activity</span><font color="#000000">&gt;<br>    &lt;/</font><span style="color: rgb(0, 0, 128); font-weight: bold;">application</span><font color="#000000">&gt;<br><br>&lt;/</font><span style="color: rgb(0, 0, 128); font-weight: bold;">manifest</span><font color="#000000">&gt;</font></pre><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p>다음은 activity_main.xml 입니다.&nbsp;</p><pre style="background-color:#ffffff;color:#000000;font-family:'Menlo';font-size:9.0pt;"><span style="font-style:italic;">&lt;?</span><span style="color:#0000ff;font-weight:bold;">xml version=</span><span style="color:#008000;font-weight:bold;">"1.0" </span><span style="color:#0000ff;font-weight:bold;">encoding=</span><span style="color:#008000;font-weight:bold;">"utf-8"</span><span style="font-style:italic;">?&gt;<br></span>&lt;<span style="color:#000080;font-weight:bold;">android.support.constraint.ConstraintLayout </span><span style="color:#0000ff;font-weight:bold;">xmlns:</span><span style="color:#660e7a;font-weight:bold;">android</span><span style="color:#0000ff;font-weight:bold;">=</span><span style="color:#008000;font-weight:bold;">"http://schemas.android.com/apk/res/android"<br></span><span style="color:#008000;font-weight:bold;">    </span><span style="color:#0000ff;font-weight:bold;">xmlns:</span><span style="color:#660e7a;font-weight:bold;">app</span><span style="color:#0000ff;font-weight:bold;">=</span><span style="color:#008000;font-weight:bold;">"http://schemas.android.com/apk/res-auto"<br></span><span style="color:#008000;font-weight:bold;">    </span><span style="color:#0000ff;font-weight:bold;">xmlns:</span><span style="color:#660e7a;font-weight:bold;">tools</span><span style="color:#0000ff;font-weight:bold;">=</span><span style="color:#008000;font-weight:bold;">"http://schemas.android.com/tools"<br></span><span style="color:#008000;font-weight:bold;">    </span><span style="color:#660e7a;font-weight:bold;">android</span><span style="color:#0000ff;font-weight:bold;">:layout_width=</span><span style="color:#008000;font-weight:bold;">"match_parent"<br></span><span style="color:#008000;font-weight:bold;">    </span><span style="color:#660e7a;font-weight:bold;">android</span><span style="color:#0000ff;font-weight:bold;">:layout_height=</span><span style="color:#008000;font-weight:bold;">"match_parent"<br></span><span style="color:#008000;font-weight:bold;">    </span><span style="color:#660e7a;font-weight:bold;">tools</span><span style="color:#0000ff;font-weight:bold;">:context=</span><span style="color:#008000;font-weight:bold;">".MainActivity"</span>&gt;<br><br>    &lt;<span style="color:#000080;font-weight:bold;">TextView<br></span><span style="color:#000080;font-weight:bold;">        </span><span style="color:#660e7a;font-weight:bold;">android</span><span style="color:#0000ff;font-weight:bold;">:id=</span><span style="color:#008000;font-weight:bold;">"@+id/sample_text"<br></span><span style="color:#008000;font-weight:bold;">        </span><span style="color:#660e7a;font-weight:bold;">android</span><span style="color:#0000ff;font-weight:bold;">:layout_width=</span><span style="color:#008000;font-weight:bold;">"wrap_content"<br></span><span style="color:#008000;font-weight:bold;">        </span><span style="color:#660e7a;font-weight:bold;">android</span><span style="color:#0000ff;font-weight:bold;">:layout_height=</span><span style="color:#008000;font-weight:bold;">"wrap_content"<br></span><span style="color:#008000;font-weight:bold;">        </span><span style="color:#660e7a;font-weight:bold;">android</span><span style="color:#0000ff;font-weight:bold;">:text=</span><span style="color:#008000;font-weight:bold;">"Hello World!"<br></span><span style="color:#008000;font-weight:bold;">        </span><span style="color:#660e7a;font-weight:bold;">app</span><span style="color:#0000ff;font-weight:bold;">:layout_constraintBottom_toBottomOf=</span><span style="color:#008000;font-weight:bold;">"parent"<br></span><span style="color:#008000;font-weight:bold;">        </span><span style="color:#660e7a;font-weight:bold;">app</span><span style="color:#0000ff;font-weight:bold;">:layout_constraintLeft_toLeftOf=</span><span style="color:#008000;font-weight:bold;">"parent"<br></span><span style="color:#008000;font-weight:bold;">        </span><span style="color:#660e7a;font-weight:bold;">app</span><span style="color:#0000ff;font-weight:bold;">:layout_constraintRight_toRightOf=</span><span style="color:#008000;font-weight:bold;">"parent"<br></span><span style="color:#008000;font-weight:bold;">        </span><span style="color:#660e7a;font-weight:bold;">app</span><span style="color:#0000ff;font-weight:bold;">:layout_constraintTop_toTopOf=</span><span style="color:#008000;font-weight:bold;">"parent" </span>/&gt;<br><br>&lt;/<span style="color:#000080;font-weight:bold;">android.support.constraint.ConstraintLayout</span>&gt;</pre><p>위와 같은 코드를 아래와 같이 변경해줍니다.&nbsp;</p><pre style="background-color:#ffffff;color:#000000;font-family:'Menlo';font-size:9.0pt;"><span style="font-style:italic;">&lt;?</span><span style="color:#0000ff;font-weight:bold;">xml version=</span><span style="color:#008000;font-weight:bold;">"1.0" </span><span style="color:#0000ff;font-weight:bold;">encoding=</span><span style="color:#008000;font-weight:bold;">"utf-8"</span><span style="font-style:italic;">?&gt;<br></span>&lt;<span style="color:#000080;font-weight:bold;">android.support.constraint.ConstraintLayout </span><span style="color:#0000ff;font-weight:bold;">xmlns:</span><span style="color:#660e7a;font-weight:bold;">android</span><span style="color:#0000ff;font-weight:bold;">=</span><span style="color:#008000;font-weight:bold;">"http://schemas.android.com/apk/res/android"<br></span><span style="color:#008000;font-weight:bold;">    </span><span style="color:#0000ff;font-weight:bold;">xmlns:</span><span style="color:#660e7a;font-weight:bold;">app</span><span style="color:#0000ff;font-weight:bold;">=</span><span style="color:#008000;font-weight:bold;">"http://schemas.android.com/apk/res-auto"<br></span><span style="color:#008000;font-weight:bold;">    </span><span style="color:#0000ff;font-weight:bold;">xmlns:</span><span style="color:#660e7a;font-weight:bold;">tools</span><span style="color:#0000ff;font-weight:bold;">=</span><span style="color:#008000;font-weight:bold;">"http://schemas.android.com/tools"<br></span><span style="color:#008000;font-weight:bold;">    </span><span style="color:#660e7a;font-weight:bold;">android</span><span style="color:#0000ff;font-weight:bold;">:layout_width=</span><span style="color:#008000;font-weight:bold;">"match_parent"<br></span><span style="color:#008000;font-weight:bold;">    </span><span style="color:#660e7a;font-weight:bold;">android</span><span style="color:#0000ff;font-weight:bold;">:layout_height=</span><span style="color:#008000;font-weight:bold;">"match_parent"<br></span><span style="color:#008000;font-weight:bold;">    </span><span style="color:#660e7a;font-weight:bold;">tools</span><span style="color:#0000ff;font-weight:bold;">:context=</span><span style="color:#008000;font-weight:bold;">".MainActivity"</span>&gt;<br><br>    &lt;<span style="color:#000080;font-weight:bold;">org.opencv.android.JavaCameraView<br></span><span style="color:#000080;font-weight:bold;">        </span><span style="color:#660e7a;font-weight:bold;">android</span><span style="color:#0000ff;font-weight:bold;">:layout_width=</span><span style="color:#008000;font-weight:bold;">"match_parent"<br></span><span style="color:#008000;font-weight:bold;">        </span><span style="color:#660e7a;font-weight:bold;">android</span><span style="color:#0000ff;font-weight:bold;">:layout_height=</span><span style="color:#008000;font-weight:bold;">"match_parent"<br></span><span style="color:#008000;font-weight:bold;">        </span><span style="color:#660e7a;font-weight:bold;">android</span><span style="color:#0000ff;font-weight:bold;">:id=</span><span style="color:#008000;font-weight:bold;">"@+id/activity_surface_view" </span>/&gt;<br><br>&lt;/<span style="color:#000080;font-weight:bold;">android.support.constraint.ConstraintLayout</span>&gt;</pre><p><br></p><p><br></p><p><br></p><p><br></p><p>다음으로는 MainActivity.java를 수정하겠습니다. 아래는 원래의 파일입니다.&nbsp;<br>무작정 복사 하는 것 보다는 하나 하나 따라하는 것이 조금 더 편하실 겁니다. ( 밑에 전체 소스가 있습니다. )&nbsp;</p><pre style="font-family: Menlo; font-size: 9pt; line-height: 1.42857; color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);"><span style="color: rgb(0, 0, 128); font-weight: bold;">package </span>com.opencv.gohn.android_opencv;<br><br><span style="color: rgb(0, 0, 128); font-weight: bold;">import </span>android.support.v7.app.AppCompatActivity;<br><span style="color: rgb(0, 0, 128); font-weight: bold;">import </span>android.os.Bundle;<br><span style="color: rgb(0, 0, 128); font-weight: bold;">import </span>android.widget.TextView;<br><br><span style="color: rgb(0, 0, 128); font-weight: bold;">public class </span>MainActivity <span style="color: rgb(0, 0, 128); font-weight: bold;">extends </span>AppCompatActivity {<br><br>    <span style="color: rgb(128, 128, 128); font-style: italic;">// Used to load the 'native-lib' library on application startup.<br></span><span style="color: rgb(128, 128, 128); font-style: italic;">    </span><span style="color: rgb(0, 0, 128); font-weight: bold;">static </span>{<br>        System.<span style="font-style: italic;">loadLibrary</span>(<span style="color: rgb(0, 128, 0); font-weight: bold;">"native-lib"</span>);<br>    }<br><br>    <span style="color: rgb(128, 128, 0);">@Override<br></span><span style="color: rgb(128, 128, 0);">    </span><span style="color: rgb(0, 0, 128); font-weight: bold;">protected void </span>onCreate(Bundle savedInstanceState) {<br>        <span style="color: rgb(0, 0, 128); font-weight: bold;">super</span>.onCreate(savedInstanceState);<br>        setContentView(R.layout.<span style="color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">activity_main</span>);<br><br>        <span style="color: rgb(128, 128, 128); font-style: italic;">// Example of a call to a native method<br></span><span style="color: rgb(128, 128, 128); font-style: italic;">        </span>TextView tv = (TextView) findViewById(R.id.<span style="color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">sample_text</span>);<br>        tv.setText(stringFromJNI());<br>    }<br><br>    <span style="color: rgb(128, 128, 128); font-style: italic;">/**<br></span><span style="color: rgb(128, 128, 128); font-style: italic;">     * A native method that is implemented by the 'native-lib' native library,<br></span><span style="color: rgb(128, 128, 128); font-style: italic;">     * which is packaged with this application.<br></span><span style="color: rgb(128, 128, 128); font-style: italic;">     */<br></span><span style="color: rgb(128, 128, 128); font-style: italic;">    </span><span style="color: rgb(0, 0, 128); font-weight: bold;">public native </span>String stringFromJNI();<br>}<br></pre><p style="font-family: Menlo; font-size: 9pt;"><br></p><p style="font-family: Menlo; font-size: 9pt;"><br></p><pre style="font-family: Menlo; font-size: 9pt; line-height: 1.42857; color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);"><strike><span style="color: rgb(0, 0, 128); font-weight: bold;">public class </span>MainActivity <span style="color: rgb(0, 0, 128); font-weight: bold;">extends </span>AppCompatActivity</strike> <span style="color: rgb(0, 0, 128); font-weight: bold;">implements </span>CameraBridgeViewBase.CvCameraViewListener2</pre><p><span style="font-family: Menlo; font-size: 9pt; color: rgb(0, 0, 128); font-weight: bold;">implements&nbsp;</span><span style="font-family: Menlo; font-size: 9pt;">CameraBridgeViewBase.CvCameraViewListener2</span>&nbsp;를 먼저 메인 class 에 추가해준다.&nbsp;</p><p>경고 표시가 나오면 추가해준 인터페이스를 import 해주고,&nbsp;<br>구현해준 인터페이스에 필요한 아래의 메소드들을 상속받는다.&nbsp;</p><p><img src="http://hellogohn.com/system/uploads/images/000/000/989/original/image.png?1523039143" style="width: 425.516px; height: 619.625px;"><br></p><p><br></p><p><br></p><p><br></p><pre style="background-color:#ffffff;color:#000000;font-family:'Menlo';font-size:9.0pt;"><strike><span style="color:#000080;font-weight:bold;">public class </span>MainActivity <span style="color:#000080;font-weight:bold;">extends </span>AppCompatActivity <span style="color:#000080;font-weight:bold;">implements </span>CameraBridgeViewBase.CvCameraViewListener2{<br></strike><br>    <span style="color:#000080;font-weight:bold;">private static final </span>String <span style="color:#660e7a;font-weight:bold;font-style:italic;">TAG </span>= <span style="color:#008000;font-weight:bold;">"opencv"</span>;<br>    <span style="color:#000080;font-weight:bold;">private </span>CameraBridgeViewBase <span style="color:#660e7a;font-weight:bold;">mOpenCvCameraView</span>;<br>    <span style="color:#000080;font-weight:bold;">private </span>Mat <span style="color:#660e7a;font-weight:bold;">matInput</span>;<br>    <span style="color:#000080;font-weight:bold;">private </span>Mat <span style="color:#660e7a;font-weight:bold;">matResult</span>;<br><br>    <span style="color:#000080;font-weight:bold;">public native void </span>ConvertRGBtoGray(<span style="color:#000080;font-weight:bold;">long </span>matAddrInput, <span style="color:#000080;font-weight:bold;">long </span>matAddrResult);<br><br><br>    <span style="color:#808080;font-style:italic;">// Used to load the 'native-lib' library on application startup.<br></span><span style="color:#808080;font-style:italic;">    </span><span style="color:#000080;font-weight:bold;">static </span>{<br>        System.<span style="font-style:italic;">loadLibrary</span>(<span style="color:#008000;font-weight:bold;">"opencv_java3"</span>);<strike><br>        System.<span style="font-style:italic;">loadLibrary</span>(<span style="color:#008000;font-weight:bold;">"native-lib"</span>);</strike><br>    }<br></pre><p>-- 표시가 있는 부분을 제외하고, 새로운 멤버 변수들을 추가해줍니다.&nbsp;</p><p><br></p><p><br></p><p><br></p><pre style="background-color:#ffffff;color:#000000;font-family:'Menlo';font-size:9.0pt;"><strike><span style="color:#808000;">@Override<br></span><span style="color:#000080;font-weight:bold;">protected void </span>onCreate(Bundle savedInstanceState) {<br>    <span style="color:#000080;font-weight:bold;">super</span>.onCreate(savedInstanceState);<br>    setContentView(R.layout.<span style="color:#660e7a;font-weight:bold;font-style:italic;">activity_main</span>);</strike><br><br>    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,<br>            WindowManager.LayoutParams.FLAG_FULLSCREEN);<br>    getWindow().setFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON,<br>            WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);<br>    setContentView(R.layout.<span style="color:#660e7a;font-weight:bold;font-style:italic;">activity_main</span>);<br><br><br>    <span style="color:#000080;font-weight:bold;">if </span>(Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {<br>        <span style="color:#808080;font-style:italic;">//퍼미션 상태 확인<br></span><span style="color:#808080;font-style:italic;">        </span><span style="color:#000080;font-weight:bold;">if </span>(!hasPermissions(PERMISSIONS)) {<br><br>            <span style="color:#808080;font-style:italic;">//퍼미션 허가 안되어있다면 사용자에게 요청<br></span><span style="color:#808080;font-style:italic;">            </span>requestPermissions(PERMISSIONS, PERMISSIONS_REQUEST_CODE);<br>        }<br>    }<br><br>    <span style="color:#660e7a;font-weight:bold;">mOpenCvCameraView </span>= (CameraBridgeViewBase)findViewById(R.id.activity_surface_view);<br>    <span style="color:#660e7a;font-weight:bold;">mOpenCvCameraView</span>.setVisibility(SurfaceView.VISIBLE);<br>    <span style="color:#660e7a;font-weight:bold;">mOpenCvCameraView</span>.setCvCameraViewListener(<span style="color:#000080;font-weight:bold;">this</span>);<br>    <span style="color:#660e7a;font-weight:bold;">mOpenCvCameraView</span>.setCameraIndex(<span style="color:#0000ff;">0</span>); <span style="color:#808080;font-style:italic;">// front-camera(1),  back-camera(0)<br></span><span style="color:#808080;font-style:italic;">    </span>mLoaderCallback.onManagerConnected(LoaderCallbackInterface.SUCCESS);<br>}</pre><p>onCreate 함수에서 위의 요소들을 추가해줍니다.&nbsp;</p><p><br></p><p><br></p><p><br></p><pre style="background-color:#ffffff;color:#000000;font-family:'Menlo';font-size:9.0pt;"><span style="color:#000080;font-weight:bold;">private </span>BaseLoaderCallback <span style="color:#660e7a;font-weight:bold;">mLoaderCallback </span>= <span style="color:#000080;font-weight:bold;">new </span>BaseLoaderCallback(<span style="color:#000080;font-weight:bold;">this</span>) {<br>    <span style="color:#808000;">@Override<br></span><span style="color:#808000;">    </span><span style="color:#000080;font-weight:bold;">public void </span>onManagerConnected(<span style="color:#000080;font-weight:bold;">int </span>status) {<br>        <span style="color:#000080;font-weight:bold;">switch </span>(status) {<br>            <span style="color:#000080;font-weight:bold;">case </span>LoaderCallbackInterface.<span style="color:#660e7a;font-weight:bold;font-style:italic;">SUCCESS</span>:<br>            {<br>                <span style="color:#660e7a;font-weight:bold;">mOpenCvCameraView</span>.enableView();<br>            } <span style="color:#000080;font-weight:bold;">break</span>;<br>            <span style="color:#000080;font-weight:bold;">default</span>:<br>            {<br>                <span style="color:#000080;font-weight:bold;">super</span>.onManagerConnected(status);<br>            } <span style="color:#000080;font-weight:bold;">break</span>;<br>        }<br>    }<br>};</pre><p>바로 아래에 위와 같은 메소드를 설정해줍니다.&nbsp;</p><p><br></p><p><br></p><p><br></p><p><br></p><pre style="background-color:#ffffff;color:#000000;font-family:'Menlo';font-size:9.0pt;"><span style="color:#808000;">@Override<br></span><span style="color:#000080;font-weight:bold;">public void </span>onPause()<br>{<br>    <span style="color:#000080;font-weight:bold;">super</span>.onPause();<br>    <span style="color:#000080;font-weight:bold;">if </span>(<span style="color:#660e7a;font-weight:bold;">mOpenCvCameraView </span>!= <span style="color:#000080;font-weight:bold;">null</span>)<br>        <span style="color:#660e7a;font-weight:bold;">mOpenCvCameraView</span>.disableView();<br>}<br><br><span style="color:#808000;">@Override<br></span><span style="color:#000080;font-weight:bold;">public void </span>onResume()<br>{<br>    <span style="color:#000080;font-weight:bold;">super</span>.onResume();<br><br>    <span style="color:#000080;font-weight:bold;">if </span>(!OpenCVLoader.<span style="font-style:italic;">initDebug</span>()) {<br>        Log.<span style="font-style:italic;">d</span>(<span style="color:#660e7a;font-weight:bold;font-style:italic;">TAG</span>, <span style="color:#008000;font-weight:bold;">"onResume :: Internal OpenCV library not found."</span>);<br>        OpenCVLoader.<span style="font-style:italic;">initAsync</span>(OpenCVLoader.<span style="color:#660e7a;font-weight:bold;font-style:italic;">OPENCV_VERSION_3_2_0</span>, <span style="color:#000080;font-weight:bold;">this</span>, mLoaderCallback);<br>    } <span style="color:#000080;font-weight:bold;">else </span>{<br>        Log.<span style="font-style:italic;">d</span>(<span style="color:#660e7a;font-weight:bold;font-style:italic;">TAG</span>, <span style="color:#008000;font-weight:bold;">"onResum :: OpenCV library found inside package. Using it!"</span>);<br>        mLoaderCallback.onManagerConnected(LoaderCallbackInterface.<span style="color:#660e7a;font-weight:bold;font-style:italic;">SUCCESS</span>);<br>    }<br>}<br><br><span style="color:#000080;font-weight:bold;">public void </span>onDestroy() {<br>    <span style="color:#000080;font-weight:bold;">super</span>.onDestroy();<br><br>    <span style="color:#000080;font-weight:bold;">if </span>(<span style="color:#660e7a;font-weight:bold;">mOpenCvCameraView </span>!= <span style="color:#000080;font-weight:bold;">null</span>)<br>        <span style="color:#660e7a;font-weight:bold;">mOpenCvCameraView</span>.disableView();<br>}</pre><p>위의 요소들을 추가해줍니다.&nbsp;<br>필요한 요소들을 import 해줍니다.&nbsp;</p><p><br></p><p><br></p><pre style="background-color:#ffffff;color:#000000;font-family:'Menlo';font-size:9.0pt;"><strike><span style="color:#808000;">@Override<br></span><span style="color:#000080;font-weight:bold;">public </span>Mat onCameraFrame(CameraBridgeViewBase.CvCameraViewFrame inputFrame) { <br></strike>    <span style="color:#660e7a;font-weight:bold;">matInput </span>= inputFrame.rgba();<br>    <span style="color:#000080;font-weight:bold;">if </span>( <span style="color:#660e7a;font-weight:bold;">matResult </span>!= <span style="color:#000080;font-weight:bold;">null </span>) <span style="color:#660e7a;font-weight:bold;">matResult</span>.release();<br>    <span style="color:#660e7a;font-weight:bold;">matResult </span>= <span style="color:#000080;font-weight:bold;">new </span>Mat(<span style="color:#660e7a;font-weight:bold;">matInput</span>.rows(), <span style="color:#660e7a;font-weight:bold;">matInput</span>.cols(), <span style="color:#660e7a;font-weight:bold;">matInput</span>.type());<br><br>    ConvertRGBtoGray(<span style="color:#660e7a;font-weight:bold;">matInput</span>.getNativeObjAddr(), <span style="color:#660e7a;font-weight:bold;">matResult</span>.getNativeObjAddr());<br><br>    <span style="color:#000080;font-weight:bold;">return </span><span style="color:#660e7a;font-weight:bold;">matResult</span>;<strike><br>}</strike></pre><p>onCameraFrame 함수는 아까 맨 처음에 인터페이스를 구현했을 때, 상속받은 메소드입니다.&nbsp;<br>위의 요소들을 추가해줍니다.&nbsp;</p><p><br></p><p><br></p><p><br></p><pre style="background-color:#ffffff;color:#000000;font-family:'Menlo';font-size:9.0pt;"><span style="color:#808080;font-style:italic;">//여기서부턴 퍼미션 관련 메소드<br></span><span style="color:#000080;font-weight:bold;">static final int </span><span style="color:#660e7a;font-weight:bold;font-style:italic;">PERMISSIONS_REQUEST_CODE </span>= <span style="color:#0000ff;">1000</span>;<br>String[] <span style="color:#660e7a;font-weight:bold;">PERMISSIONS  </span>= {<span style="color:#008000;font-weight:bold;">"android.permission.CAMERA"</span>};<br><br><br><span style="color:#000080;font-weight:bold;">private boolean </span>hasPermissions(String[] permissions) {<br>    <span style="color:#000080;font-weight:bold;">int </span>result;<br><br>    <span style="color:#808080;font-style:italic;">//스트링 배열에 있는 퍼미션들의 허가 상태 여부 확인<br></span><span style="color:#808080;font-style:italic;">    </span><span style="color:#000080;font-weight:bold;">for </span>(String perms : permissions){<br><br>        result = ContextCompat.<span style="font-style:italic;">checkSelfPermission</span>(<span style="color:#000080;font-weight:bold;">this</span>, perms);<br><br>        <span style="color:#000080;font-weight:bold;">if </span>(result == PackageManager.<span style="color:#660e7a;font-weight:bold;font-style:italic;">PERMISSION_DENIED</span>){<br>            <span style="color:#808080;font-style:italic;">//허가 안된 퍼미션 발견<br></span><span style="color:#808080;font-style:italic;">            </span><span style="color:#000080;font-weight:bold;">return false</span>;<br>        }<br>    }<br><br>    <span style="color:#808080;font-style:italic;">//모든 퍼미션이 허가되었음<br></span><span style="color:#808080;font-style:italic;">    </span><span style="color:#000080;font-weight:bold;">return true</span>;<br>}<br><br><span style="color:#808000;">@Override<br></span><span style="color:#000080;font-weight:bold;">public void </span>onRequestPermissionsResult(<span style="color:#000080;font-weight:bold;">int </span>requestCode, <span style="color:#808000;">@NonNull </span>String[] permissions, <span style="color:#808000;">@NonNull </span><span style="color:#000080;font-weight:bold;">int</span>[] grantResults) {<br>    <span style="color:#000080;font-weight:bold;">super</span>.onRequestPermissionsResult(requestCode, permissions, grantResults);<br><br>    <span style="color:#000080;font-weight:bold;">switch</span>(requestCode){ <br>        <span style="color:#000080;font-weight:bold;">case </span><span style="color:#660e7a;font-weight:bold;font-style:italic;">PERMISSIONS_REQUEST_CODE</span>:<br>            <span style="color:#000080;font-weight:bold;">if </span>(grantResults.<span style="color:#660e7a;font-weight:bold;">length </span>&gt; <span style="color:#0000ff;">0</span>) {<br>                <span style="color:#000080;font-weight:bold;">boolean </span>cameraPermissionAccepted = grantResults[<span style="color:#0000ff;">0</span>]<br>                        == PackageManager.<span style="color:#660e7a;font-weight:bold;font-style:italic;">PERMISSION_GRANTED</span>;<br><br>                <span style="color:#000080;font-weight:bold;">if </span>(!cameraPermissionAccepted)<br>                    showDialogForPermission(<span style="color:#008000;font-weight:bold;">"앱을 실행하려면 퍼미션을 허가하셔야합니다."</span>);<br>            }<br>            <span style="color:#000080;font-weight:bold;">break</span>;<br>    }<br>}<br><br><span style="color:#808000;">@TargetApi</span>(Build.VERSION_CODES.<span style="color:#660e7a;font-weight:bold;font-style:italic;">M</span>)<br><span style="color:#000080;font-weight:bold;">private void </span>showDialogForPermission(String msg) {<br><br>    AlertDialog.Builder builder = <span style="color:#000080;font-weight:bold;">new </span>AlertDialog.Builder( MainActivity.<span style="color:#000080;font-weight:bold;">this</span>);<br>    builder.setTitle(<span style="color:#008000;font-weight:bold;">"알림"</span>);<br>    builder.setMessage(msg);<br>    builder.setCancelable(<span style="color:#000080;font-weight:bold;">false</span>);<br>    builder.setPositiveButton(<span style="color:#008000;font-weight:bold;">"예"</span>, <span style="color:#000080;font-weight:bold;">new </span>DialogInterface.OnClickListener() {<br>        <span style="color:#000080;font-weight:bold;">public void </span>onClick(DialogInterface dialog, <span style="color:#000080;font-weight:bold;">int </span>id){<br>            requestPermissions(<span style="color:#660e7a;font-weight:bold;">PERMISSIONS</span>, <span style="color:#660e7a;font-weight:bold;font-style:italic;">PERMISSIONS_REQUEST_CODE</span>);<br>        }<br>    });<br>    builder.setNegativeButton(<span style="color:#008000;font-weight:bold;">"아니오"</span>, <span style="color:#000080;font-weight:bold;">new </span>DialogInterface.OnClickListener() {<br>        <span style="color:#000080;font-weight:bold;">public void </span>onClick(DialogInterface arg0, <span style="color:#000080;font-weight:bold;">int </span>arg1) {<br>            finish();<br>        }<br>    });<br>    builder.create().show();<br>}<br></pre><p>해당 소스는 새로 추가해야 할 메소드들 입니다.&nbsp;<br><br></p><p><br></p><p><br></p><p>다 해주면 아래와 같은 소스코드가 나오게 됩니다.&nbsp; ( package랑 import만 빼고 나머지는 다 가져와도 될 것 같긴 하지만, 버전 별로 상이할 수 있기 때문에 하나씩 복사 하는 것이 가장 좋은 것 같습니다. )&nbsp;</p><pre style="background-color:#ffffff;color:#000000;font-family:'Menlo';font-size:9.0pt;"><span style="color:#000080;font-weight:bold;">package </span>com.opencv.gohn.android_opencv;<br><br><span style="color:#000080;font-weight:bold;">import </span>android.annotation.<span style="color:#808000;">TargetApi</span>;<br><span style="color:#000080;font-weight:bold;">import </span>android.content.DialogInterface;<br><span style="color:#000080;font-weight:bold;">import </span>android.content.pm.PackageManager;<br><span style="color:#000080;font-weight:bold;">import </span>android.os.Build;<br><span style="color:#000080;font-weight:bold;">import </span>android.support.annotation.<span style="color:#808000;">NonNull</span>;<br><span style="color:#000080;font-weight:bold;">import </span>android.support.v4.content.ContextCompat;<br><span style="color:#000080;font-weight:bold;">import </span>android.support.v7.app.AlertDialog;<br><span style="color:#000080;font-weight:bold;">import </span>android.support.v7.app.AppCompatActivity;<br><span style="color:#000080;font-weight:bold;">import </span>android.os.Bundle;<br><span style="color:#000080;font-weight:bold;">import </span>android.util.Log;<br><span style="color:#000080;font-weight:bold;">import </span>android.view.SurfaceView;<br><span style="color:#000080;font-weight:bold;">import </span>android.view.WindowManager;<br><span style="color:#000080;font-weight:bold;">import </span>android.widget.TextView;<br><br><span style="color:#000080;font-weight:bold;">import </span>org.opencv.android.BaseLoaderCallback;<br><span style="color:#000080;font-weight:bold;">import </span>org.opencv.android.CameraBridgeViewBase;<br><span style="color:#000080;font-weight:bold;">import </span>org.opencv.android.LoaderCallbackInterface;<br><span style="color:#000080;font-weight:bold;">import </span>org.opencv.android.OpenCVLoader;<br><span style="color:#000080;font-weight:bold;">import </span>org.opencv.core.Mat;<br><br><span style="color:#000080;font-weight:bold;">public class </span>MainActivity <span style="color:#000080;font-weight:bold;">extends </span>AppCompatActivity <span style="color:#000080;font-weight:bold;">implements </span>CameraBridgeViewBase.CvCameraViewListener2{<br><br>    <span style="color:#000080;font-weight:bold;">private static final </span>String <span style="color:#660e7a;font-weight:bold;font-style:italic;">TAG </span>= <span style="color:#008000;font-weight:bold;">"opencv"</span>;<br>    <span style="color:#000080;font-weight:bold;">private </span>CameraBridgeViewBase <span style="color:#660e7a;font-weight:bold;">mOpenCvCameraView</span>;<br>    <span style="color:#000080;font-weight:bold;">private </span>Mat <span style="color:#660e7a;font-weight:bold;">matInput</span>;<br>    <span style="color:#000080;font-weight:bold;">private </span>Mat <span style="color:#660e7a;font-weight:bold;">matResult</span>;<br><br>    <span style="color:#000080;font-weight:bold;">public native void </span>ConvertRGBtoGray(<span style="color:#000080;font-weight:bold;">long </span>matAddrInput, <span style="color:#000080;font-weight:bold;">long </span>matAddrResult);<br>    <br>    <span style="color:#808080;font-style:italic;">// Used to load the 'native-lib' library on application startup.<br></span><span style="color:#808080;font-style:italic;">    </span><span style="color:#000080;font-weight:bold;">static </span>{<br>        System.<span style="font-style:italic;">loadLibrary</span>(<span style="color:#008000;font-weight:bold;">"opencv_java3"</span>);<br>        System.<span style="font-style:italic;">loadLibrary</span>(<span style="color:#008000;font-weight:bold;">"native-lib"</span>);<br>    }<br><br><br>    <span style="color:#808000;">@Override<br></span><span style="color:#808000;">    </span><span style="color:#000080;font-weight:bold;">protected void </span>onCreate(Bundle savedInstanceState) {<br>        <span style="color:#000080;font-weight:bold;">super</span>.onCreate(savedInstanceState);<br>        setContentView(R.layout.<span style="color:#660e7a;font-weight:bold;font-style:italic;">activity_main</span>);<br><br>        getWindow().setFlags(WindowManager.LayoutParams.<span style="color:#660e7a;font-weight:bold;font-style:italic;">FLAG_FULLSCREEN</span>,<br>                WindowManager.LayoutParams.<span style="color:#660e7a;font-weight:bold;font-style:italic;">FLAG_FULLSCREEN</span>);<br>        getWindow().setFlags(WindowManager.LayoutParams.<span style="color:#660e7a;font-weight:bold;font-style:italic;">FLAG_KEEP_SCREEN_ON</span>,<br>                WindowManager.LayoutParams.<span style="color:#660e7a;font-weight:bold;font-style:italic;">FLAG_KEEP_SCREEN_ON</span>);<br>        setContentView(R.layout.<span style="color:#660e7a;font-weight:bold;font-style:italic;">activity_main</span>);<br>        <br>        <span style="color:#000080;font-weight:bold;">if </span>(Build.VERSION.<span style="color:#660e7a;font-weight:bold;font-style:italic;">SDK_INT </span>&gt;= Build.VERSION_CODES.<span style="color:#660e7a;font-weight:bold;font-style:italic;">M</span>) {<br>            <span style="color:#808080;font-style:italic;">//퍼미션 상태 확인<br></span><span style="color:#808080;font-style:italic;">            </span><span style="color:#000080;font-weight:bold;">if </span>(!hasPermissions(<span style="color:#660e7a;font-weight:bold;">PERMISSIONS</span>)) {<br>                <span style="color:#808080;font-style:italic;">//퍼미션 허가 안되어있다면 사용자에게 요청<br></span><span style="color:#808080;font-style:italic;">                </span>requestPermissions(<span style="color:#660e7a;font-weight:bold;">PERMISSIONS</span>, <span style="color:#660e7a;font-weight:bold;font-style:italic;">PERMISSIONS_REQUEST_CODE</span>);<br>            }<br>        }<br><br>        <span style="color:#660e7a;font-weight:bold;">mOpenCvCameraView </span>= (CameraBridgeViewBase)findViewById(R.id.<span style="color:#660e7a;font-weight:bold;font-style:italic;">activity_surface_view</span>);<br>        <span style="color:#660e7a;font-weight:bold;">mOpenCvCameraView</span>.setVisibility(SurfaceView.<span style="color:#660e7a;font-weight:bold;font-style:italic;">VISIBLE</span>);<br>        <span style="color:#660e7a;font-weight:bold;">mOpenCvCameraView</span>.setCvCameraViewListener(<span style="color:#000080;font-weight:bold;">this</span>);<br>        <span style="color:#660e7a;font-weight:bold;">mOpenCvCameraView</span>.setCameraIndex(<span style="color:#0000ff;">0</span>); <span style="color:#808080;font-style:italic;">// front-camera(1),  back-camera(0)<br></span><span style="color:#808080;font-style:italic;">        </span><span style="color:#660e7a;font-weight:bold;">mLoaderCallback</span>.onManagerConnected(LoaderCallbackInterface.<span style="color:#660e7a;font-weight:bold;font-style:italic;">SUCCESS</span>);<br>    }<br><br>    <br>    <span style="color:#000080;font-weight:bold;">private </span>BaseLoaderCallback <span style="color:#660e7a;font-weight:bold;">mLoaderCallback </span>= <span style="color:#000080;font-weight:bold;">new </span>BaseLoaderCallback(<span style="color:#000080;font-weight:bold;">this</span>) {<br>        <span style="color:#808000;">@Override<br></span><span style="color:#808000;">        </span><span style="color:#000080;font-weight:bold;">public void </span>onManagerConnected(<span style="color:#000080;font-weight:bold;">int </span>status) {<br>            <span style="color:#000080;font-weight:bold;">switch </span>(status) {<br>                <span style="color:#000080;font-weight:bold;">case </span>LoaderCallbackInterface.<span style="color:#660e7a;font-weight:bold;font-style:italic;">SUCCESS</span>:<br>                {<br>                    <span style="color:#660e7a;font-weight:bold;">mOpenCvCameraView</span>.enableView();<br>                } <span style="color:#000080;font-weight:bold;">break</span>;<br>                <span style="color:#000080;font-weight:bold;">default</span>:<br>                {<br>                    <span style="color:#000080;font-weight:bold;">super</span>.onManagerConnected(status);<br>                } <span style="color:#000080;font-weight:bold;">break</span>;<br>            }<br>        }<br>    };<br><br>    <br>    <span style="color:#808000;">@Override<br></span><span style="color:#808000;">    </span><span style="color:#000080;font-weight:bold;">public void </span>onPause()<br>    {<br>        <span style="color:#000080;font-weight:bold;">super</span>.onPause();<br>        <span style="color:#000080;font-weight:bold;">if </span>(<span style="color:#660e7a;font-weight:bold;">mOpenCvCameraView </span>!= <span style="color:#000080;font-weight:bold;">null</span>)<br>            <span style="color:#660e7a;font-weight:bold;">mOpenCvCameraView</span>.disableView();<br>    }<br><br>    <span style="color:#808000;">@Override<br></span><span style="color:#808000;">    </span><span style="color:#000080;font-weight:bold;">public void </span>onResume()<br>    {<br>        <span style="color:#000080;font-weight:bold;">super</span>.onResume();<br><br>        <span style="color:#000080;font-weight:bold;">if </span>(!OpenCVLoader.<span style="font-style:italic;">initDebug</span>()) {<br>            Log.<span style="font-style:italic;">d</span>(<span style="color:#660e7a;font-weight:bold;font-style:italic;">TAG</span>, <span style="color:#008000;font-weight:bold;">"onResume :: Internal OpenCV library not found."</span>);<br>            OpenCVLoader.<span style="font-style:italic;">initAsync</span>(OpenCVLoader.<span style="color:#660e7a;font-weight:bold;font-style:italic;">OPENCV_VERSION_3_2_0</span>, <span style="color:#000080;font-weight:bold;">this</span>, <span style="color:#660e7a;font-weight:bold;">mLoaderCallback</span>);<br>        } <span style="color:#000080;font-weight:bold;">else </span>{<br>            Log.<span style="font-style:italic;">d</span>(<span style="color:#660e7a;font-weight:bold;font-style:italic;">TAG</span>, <span style="color:#008000;font-weight:bold;">"onResum :: OpenCV library found inside package. Using it!"</span>);<br>            <span style="color:#660e7a;font-weight:bold;">mLoaderCallback</span>.onManagerConnected(LoaderCallbackInterface.<span style="color:#660e7a;font-weight:bold;font-style:italic;">SUCCESS</span>);<br>        }<br>    }<br><br><br>    <span style="color:#000080;font-weight:bold;">public void </span>onDestroy() {<br>        <span style="color:#000080;font-weight:bold;">super</span>.onDestroy();<br><br>        <span style="color:#000080;font-weight:bold;">if </span>(<span style="color:#660e7a;font-weight:bold;">mOpenCvCameraView </span>!= <span style="color:#000080;font-weight:bold;">null</span>)<br>            <span style="color:#660e7a;font-weight:bold;">mOpenCvCameraView</span>.disableView();<br>    }<br><br>    <span style="color:#808080;font-style:italic;">/**<br></span><span style="color:#808080;font-style:italic;">     * A native method that is implemented by the 'native-lib' native library,<br></span><span style="color:#808080;font-style:italic;">     * which is packaged with this application.<br></span><span style="color:#808080;font-style:italic;">     */<br></span><span style="color:#808080;font-style:italic;">    </span><span style="color:#000080;font-weight:bold;">public native </span>String stringFromJNI();<br><br>    <span style="color:#808000;">@Override<br></span><span style="color:#808000;">    </span><span style="color:#000080;font-weight:bold;">public void </span>onCameraViewStarted(<span style="color:#000080;font-weight:bold;">int </span>width, <span style="color:#000080;font-weight:bold;">int </span>height) {<br><br>    }<br><br>    <span style="color:#808000;">@Override<br></span><span style="color:#808000;">    </span><span style="color:#000080;font-weight:bold;">public void </span>onCameraViewStopped() {<br><br>    }<br><br>    <span style="color:#808000;">@Override<br></span><span style="color:#808000;">    </span><span style="color:#000080;font-weight:bold;">public </span>Mat onCameraFrame(CameraBridgeViewBase.CvCameraViewFrame inputFrame) {<br>        <span style="color:#660e7a;font-weight:bold;">matInput </span>= inputFrame.rgba();<br>        <span style="color:#000080;font-weight:bold;">if </span>( <span style="color:#660e7a;font-weight:bold;">matResult </span>!= <span style="color:#000080;font-weight:bold;">null </span>) <span style="color:#660e7a;font-weight:bold;">matResult</span>.release();<br>        <span style="color:#660e7a;font-weight:bold;">matResult </span>= <span style="color:#000080;font-weight:bold;">new </span>Mat(<span style="color:#660e7a;font-weight:bold;">matInput</span>.rows(), <span style="color:#660e7a;font-weight:bold;">matInput</span>.cols(), <span style="color:#660e7a;font-weight:bold;">matInput</span>.type());<br><br>        ConvertRGBtoGray(<span style="color:#660e7a;font-weight:bold;">matInput</span>.getNativeObjAddr(), <span style="color:#660e7a;font-weight:bold;">matResult</span>.getNativeObjAddr());<br><br>        <span style="color:#000080;font-weight:bold;">return </span><span style="color:#660e7a;font-weight:bold;">matResult</span>;<br>    }<br><br>    <span style="color:#808080;font-style:italic;">//여기서부턴 퍼미션 관련 메소드<br></span><span style="color:#808080;font-style:italic;">    </span><span style="color:#000080;font-weight:bold;">static final int </span><span style="color:#660e7a;font-weight:bold;font-style:italic;">PERMISSIONS_REQUEST_CODE </span>= <span style="color:#0000ff;">1000</span>;<br>    String[] <span style="color:#660e7a;font-weight:bold;">PERMISSIONS  </span>= {<span style="color:#008000;font-weight:bold;">"android.permission.CAMERA"</span>};<br><br><br>    <span style="color:#000080;font-weight:bold;">private boolean </span>hasPermissions(String[] permissions) {<br>        <span style="color:#000080;font-weight:bold;">int </span>result;<br><br>        <span style="color:#808080;font-style:italic;">//스트링 배열에 있는 퍼미션들의 허가 상태 여부 확인<br></span><span style="color:#808080;font-style:italic;">        </span><span style="color:#000080;font-weight:bold;">for </span>(String perms : permissions){<br><br>            result = ContextCompat.<span style="font-style:italic;">checkSelfPermission</span>(<span style="color:#000080;font-weight:bold;">this</span>, perms);<br><br>            <span style="color:#000080;font-weight:bold;">if </span>(result == PackageManager.<span style="color:#660e7a;font-weight:bold;font-style:italic;">PERMISSION_DENIED</span>){<br>                <span style="color:#808080;font-style:italic;">//허가 안된 퍼미션 발견<br></span><span style="color:#808080;font-style:italic;">                </span><span style="color:#000080;font-weight:bold;">return false</span>;<br>            }<br>        }<br><br>        <span style="color:#808080;font-style:italic;">//모든 퍼미션이 허가되었음<br></span><span style="color:#808080;font-style:italic;">        </span><span style="color:#000080;font-weight:bold;">return true</span>;<br>    }<br><br>    <span style="color:#808000;">@Override<br></span><span style="color:#808000;">    </span><span style="color:#000080;font-weight:bold;">public void </span>onRequestPermissionsResult(<span style="color:#000080;font-weight:bold;">int </span>requestCode, <span style="color:#808000;">@NonNull </span>String[] permissions, <span style="color:#808000;">@NonNull </span><span style="color:#000080;font-weight:bold;">int</span>[] grantResults) {<br>        <span style="color:#000080;font-weight:bold;">super</span>.onRequestPermissionsResult(requestCode, permissions, grantResults);<br><br>        <span style="color:#000080;font-weight:bold;">switch</span>(requestCode){<br>            <span style="color:#000080;font-weight:bold;">case </span><span style="color:#660e7a;font-weight:bold;font-style:italic;">PERMISSIONS_REQUEST_CODE</span>:<br>                <span style="color:#000080;font-weight:bold;">if </span>(grantResults.<span style="color:#660e7a;font-weight:bold;">length </span>&gt; <span style="color:#0000ff;">0</span>) {<br>                    <span style="color:#000080;font-weight:bold;">boolean </span>cameraPermissionAccepted = grantResults[<span style="color:#0000ff;">0</span>]<br>                            == PackageManager.<span style="color:#660e7a;font-weight:bold;font-style:italic;">PERMISSION_GRANTED</span>;<br><br>                    <span style="color:#000080;font-weight:bold;">if </span>(!cameraPermissionAccepted)<br>                        showDialogForPermission(<span style="color:#008000;font-weight:bold;">"앱을 실행하려면 퍼미션을 허가하셔야합니다."</span>);<br>                }<br>                <span style="color:#000080;font-weight:bold;">break</span>;<br>        }<br>    }<br><br>    <span style="color:#808000;">@TargetApi</span>(Build.VERSION_CODES.<span style="color:#660e7a;font-weight:bold;font-style:italic;">M</span>)<br>    <span style="color:#000080;font-weight:bold;">private void </span>showDialogForPermission(String msg) {<br><br>        AlertDialog.Builder builder = <span style="color:#000080;font-weight:bold;">new </span>AlertDialog.Builder( MainActivity.<span style="color:#000080;font-weight:bold;">this</span>);<br>        builder.setTitle(<span style="color:#008000;font-weight:bold;">"알림"</span>);<br>        builder.setMessage(msg);<br>        builder.setCancelable(<span style="color:#000080;font-weight:bold;">false</span>);<br>        builder.setPositiveButton(<span style="color:#008000;font-weight:bold;">"예"</span>, <span style="color:#000080;font-weight:bold;">new </span>DialogInterface.OnClickListener() {<br>            <span style="color:#000080;font-weight:bold;">public void </span>onClick(DialogInterface dialog, <span style="color:#000080;font-weight:bold;">int </span>id){<br>                requestPermissions(<span style="color:#660e7a;font-weight:bold;">PERMISSIONS</span>, <span style="color:#660e7a;font-weight:bold;font-style:italic;">PERMISSIONS_REQUEST_CODE</span>);<br>            }<br>        });<br>        builder.setNegativeButton(<span style="color:#008000;font-weight:bold;">"아니오"</span>, <span style="color:#000080;font-weight:bold;">new </span>DialogInterface.OnClickListener() {<br>            <span style="color:#000080;font-weight:bold;">public void </span>onClick(DialogInterface arg0, <span style="color:#000080;font-weight:bold;">int </span>arg1) {<br>                finish();<br>            }<br>        });<br>        builder.create().show();<br>    }<br><br><br>}<br></pre><p><br></p><p><br></p><p><br></p><p><br></p><p><img src="/system/uploads/images/000/000/990/original/image.png?1523040857" style="width: 663px; height: 44.6831px;"><br></p><p>과정을 전부 마치고 나면 ConvertRGBtoGray 에 빨갛게 표시가 됩니다.&nbsp;<br>함수를 생성해주기 위해서 빨간 전구를 눌러서 아래의 버튼을 눌러줍니다.&nbsp;<br><br><img src="/system/uploads/images/000/000/991/original/image.png?1523040892" style="width: 1118px;"><br></p><p><br></p><p><br></p><p><br></p><p>메소드 생성을 누르면 자동으로 android_opencv/app/src/main/cpp/native-lib.cpp 로 이동합니다.&nbsp;<br></p><p><img src="/system/uploads/images/000/000/993/original/image.png?1523041943" style="width: 300.266px; height: 300.266px;"></p><p><br></p><p>아래의 분홍색 글자의 내용을 추가해줍니다.&nbsp;</p><pre style="background-color: rgb(255, 255, 255); font-family: Menlo; font-size: 9pt;"><span style="color: rgb(128, 128, 0);">#include </span><span style="color: rgb(0, 128, 0); font-weight: bold;">&lt;jni.h&gt;<br></span><span style="color: rgb(128, 128, 0);">#include </span><span style="color: rgb(0, 128, 0); font-weight: bold;">&lt;string&gt;<br></span><font color="#ff00ff">#include <span style="font-weight: bold;">&lt;opencv2/core/core.hpp&gt;<br></span>#include <span style="font-weight: bold;">&lt;opencv2/imgproc/imgproc.hpp&gt;<br></span><span style="font-weight: bold;"><br></span><span style="font-weight: bold;">using namespace </span>cv;</font><font color="#000000"><br><br></font><span style="color: rgb(0, 0, 128); font-weight: bold;">extern </span><span style="color: rgb(0, 128, 0); font-weight: bold;">"C" </span><span style="color: rgb(31, 84, 46); font-weight: bold;">JNIEXPORT </span><span style="color: rgb(55, 31, 128);">jstring<br></span><span style="color: rgb(55, 31, 128);"><br></span><span style="color: rgb(31, 84, 46); font-weight: bold;">JNICALL<br></span><font color="#000000">Java_com_opencv_gohn_android_1opencv_MainActivity_stringFromJNI(<br>        </font><span style="color: rgb(55, 31, 128);">JNIEnv </span><font color="#000000">*env,<br>        </font><span style="color: rgb(55, 31, 128);">jobject </span><span style="color: rgb(128, 128, 128); font-style: italic;">/* this */</span><font color="#000000">) {<br>    </font><span style="color: rgb(0, 128, 128);">std</span><font color="#000000">::</font><span style="color: rgb(55, 31, 128);">string </span><font color="#000000">hello = </font><span style="color: rgb(0, 128, 0); font-weight: bold;">"Hello from C++"</span><font color="#000000">;<br>    </font><span style="color: rgb(0, 0, 128); font-weight: bold;">return </span><font color="#000000">env-&gt;NewStringUTF(hello.c_str());<br>}<br></font><span style="color: rgb(0, 0, 128); font-weight: bold;">extern </span><span style="color: rgb(0, 128, 0); font-weight: bold;">"C"<br></span><span style="color: rgb(31, 84, 46); font-weight: bold;">JNIEXPORT </span><span style="color: rgb(0, 0, 128); font-weight: bold;">void </span><span style="color: rgb(31, 84, 46); font-weight: bold;">JNICALL<br></span><font color="#000000">Java_com_opencv_gohn_android_1opencv_MainActivity_ConvertRGBtoGray(</font><span style="color: rgb(55, 31, 128);">JNIEnv </span><font color="#000000">*env, </font><span style="color: rgb(55, 31, 128);">jobject </span><font color="#000000">instance,<br>                                                                   </font><span style="color: rgb(55, 31, 128);">jlong </span><font color="#000000">matAddrInput,<br>                                                                   </font><span style="color: rgb(55, 31, 128);">jlong </span><font color="#000000">matAddrResult) {<br></font><font color="#ff00ff"><br>    <span style="font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">TODO<br></span><span style="font-weight: bold; font-style: italic;">    </span>Mat &amp;matInput = *(Mat *)matAddrInput;<br>    Mat &amp;matResult = *(Mat *)matAddrResult;<br><br>    cvtColor(matInput, matResult, CV_RGBA2GRAY);</font><font color="#000000"><br>}</font></pre><p><br></p><p><br></p><p><br></p><p>TODO 밑에 추가한 코드는 RGBA 이미지를 GRAY 이미지로 변환하는 코드입니다.<br>작성을 하면 아직 opencv2를 인식하지 못합니다.&nbsp;</p><p><img src="/system/uploads/images/000/000/994/original/image.png?1523042120" style="width: 443.014px; height: 508px;"><br></p><p><br class="Apple-interchange-newline">해결해봅시다!!&nbsp;<br></p><p><br></p><p>다음으로는 android_opencv/app/CMakeLists.txt를 수정해 주어야 합니다.&nbsp;</p><p><img src="/system/uploads/images/000/000/995/original/image.png?1523042272" style="width: 25%;"><br></p><p><br></p><p><br>초록부분은 그대로 복사해서 넣으시면 됩니다.<br>분홍 글씨와 주황색 부분은 주의하셔야합니다.&nbsp;<br>분홍 글씨는 그대로 사용하지만, 주황색 부분은 각자의 OpenCV와 프로젝트의 경로에 따라서 변경해야합니다.&nbsp;<br>pathOpenCV에 OpenCV 라이브러리 경로, pathProject에 안드로이드 프로젝트 경로를 틀리지 않도록 조심해야 합니다.&nbsp;</p><pre style="background-color: rgb(255, 255, 255); font-family: Menlo; font-size: 9pt;"><font color="#000000"># For more information about using CMake with Android Studio, read the<br># documentation: https://d.android.com/studio/projects/add-native-code.html<br><br># Sets the minimum version of CMake required to build the native library.<br><br>cmake_minimum_required(VERSION 3.4.1)<br><br></font><font color="#ff00ff"><br>set(pathOPENCV </font><font color="#ff9c00">/Users/imjaegon/programming/OpenCV-android-sdk</font><font color="#ff00ff">)<br>set(pathPROJECT </font><font color="#ff9c00">/Users/imjaegon/OneDrive/Documents/android/android_opencv</font><font color="#ff00ff">)</font><font color="#00ff00"><br>set(pathLIBOPENCV_JAVA ${pathPROJECT}/app/src/main/JniLibs/${ANDROID_ABI}/libopencv_java3.so)<br><br>set(CMAKE_VERBOSE_MAKEFILE on)<br>set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=gnu++11")<br><br>include_directories(${pathOPENCV}/sdk/native/jni/include)</font><font color="#000000"><br><br><br># Creates and names a library, sets it as either STATIC<br># or SHARED, and provides the relative paths to its source code.<br># You can define multiple libraries, and CMake builds them for you.<br># Gradle automatically packages shared libraries with your APK.<br><br>add_library( # Sets the name of the library.<br>             native-lib<br><br>             # Sets the library as a shared library.<br>             SHARED<br><br>             # Provides a relative path to your source file(s).<br>             src/main/cpp/native-lib.cpp )<br><br># Searches for a specified prebuilt library and stores the path as a<br># variable. Because CMake includes system libraries in the search path by<br># default, you only need to specify the name of the public NDK library<br># you want to add. CMake verifies that the library exists before<br># completing its build.<br><br><br></font><font color="#00ff00">add_library( lib_opencv SHARED IMPORTED )<br>set_target_properties(lib_opencv PROPERTIES IMPORTED_LOCATION ${pathLIBOPENCV_JAVA})</font><font color="#000000"><br><br><br>find_library( # Sets the name of the path variable.<br>              log-lib<br><br>              # Specifies the name of the NDK library that<br>              # you want CMake to locate.<br>              log )<br><br># Specifies libraries CMake should link to your target library. You<br># can link multiple libraries, such as libraries you define in this<br># build script, prebuilt third-party libraries, or system libraries.<br><br>target_link_libraries( # Specifies the target library.<br>                       native-lib<br><br>                       </font><font color="#00ff00">lib_opencv</font><font color="#000000"><br><br>                       # Links the target library to the log library<br>                       # included in the NDK.<br>                       ${log-lib} )</font></pre><p><br></p><p><br></p><p><br></p><p>이제 끝!!!&nbsp;<br>빌드해봅니다!!&nbsp;</p><p>사진이 흑백 사진으로 잘 바뀌어서 나옵니다 !!!!&nbsp;</p><p><img src="/system/uploads/images/000/000/996/original/KakaoTalk_Photo_2018-04-07-04-31-05_24.jpeg?1523043078" style="width: 960px;"><br></p><p><img src="/system/uploads/images/000/000/997/original/KakaoTalk_Photo_2018-04-07-04-31-08_58.jpeg?1523043090" style="width: 960px;"><br></p><p><img src="/system/uploads/images/000/000/998/original/KakaoTalk_Photo_2018-04-07-04-31-07_66.jpeg?1523043099" style="width: 960px;"><br></p><p><br></p><p><br></p><p>- 출처 -<br><a href="http://humble.tistory.com/39">http://humble.tistory.com/39</a><br><a href="https://developer.android.com/ndk/index.html?hl=ko">https://developer.android.com/ndk/index.html?hl=ko</a>&nbsp;<br>위키백과<br></p>