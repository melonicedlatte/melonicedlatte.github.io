---
layout : article
title: "Ajax 내에서 return 하면 undefined 현상."
aside:
  toc: true
tags: Web
category : Web
author: melonicedlatte
published : True
hellogohn_num : 84
key : 2017-05-18-185045
--- 

<p>제목과 같습니다.&nbsp;<br></p><p>함수를 하나 제작해서 내부에서 ajax 를 사용하고, <br>ajax 값을 return 하려면 함수의 값이 undefined 로 나오는 현상이 발생합니다.&nbsp;<br></p><p>Ajax 를 사용하고 내부에서 ( 가령 success ) 같은 곳에서 return 을 해주면&nbsp;<br>제대로 return 되지 않습니다.&nbsp;</p><p><br>&gt;&gt; 작동하지 않는 예시<br></p><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'Fira Code';font-size:11.3pt;"><span style="color:#cc7832;font-weight:bold;">function </span>imgUploadfun() {<br><br>    $.ajax({<br>        url: <span style="color:#6a8759;">"mainImageUpload.php"</span><span style="color:#cc7832;">, </span><span style="color:#808080;">// Url to which the request is send<br></span><span style="color:#808080;">        </span>type: <span style="color:#6a8759;">"POST"</span><span style="color:#cc7832;">, </span><span style="color:#808080;">// Type of request to be send, called as method<br></span><span style="color:#808080;">        </span>data: postData<span style="color:#cc7832;">, </span><span style="color:#808080;">// Data sent to server, a set of key/value pairs (i.e. form fields and values)<br></span><span style="color:#808080;">        </span>contentType: <span style="color:#cc7832;font-weight:bold;">false</span><span style="color:#cc7832;">, </span><span style="color:#808080;">// The content type used when sending data to the server.<br></span><span style="color:#808080;">        </span>cache: <span style="color:#cc7832;font-weight:bold;">false</span><span style="color:#cc7832;">, </span><span style="color:#808080;">// To unable request pages to be cached<br></span><span style="color:#808080;">        </span>processData: <span style="color:#cc7832;font-weight:bold;">false</span><span style="color:#cc7832;">, </span><span style="color:#808080;">// To send DOMDocument or non processed data file it is set to false<br></span><span style="color:#808080;">        </span>async: <span style="color:#cc7832;font-weight:bold;">false</span><span style="color:#cc7832;">,<br></span><span style="color:#cc7832;">        </span>success: <span style="color:#cc7832;font-weight:bold;">function </span>(json<span style="color:#cc7832;">, </span>aJaxtatus) <span style="color:#808080;">// A function to be called if request succeeds<br></span><span style="color:#808080;">        </span>{<br>            <span style="color:#808080;">//var imageUploadJson = $.trim(json) ;<br></span><span style="color:#808080;">            </span><span style="color:#cc7832;font-weight:bold;">var </span>imageUploadJson = JSON.parse(json)<span style="color:#cc7832;">;<br></span><span style="color:#cc7832;">            </span><span style="color:#cc7832;font-weight:bold;">if </span>(imageUploadJson.status == <span style="color:#6a8759;">"OK"</span>) {<br>                mainImageUrl = imageUploadJson.url.slice(<span style="color:#6897bb;">9</span><span style="color:#cc7832;">, </span>imageUploadJson.url.length)<span style="color:#cc7832;">;<br></span><span style="color:#cc7832;">                </span><span style="color:#808080;">// ajaxMainImg(mainImageUrl);<br></span><span style="color:#808080;">            </span>} <span style="color:#cc7832;font-weight:bold;">else </span>{<br>                <span style="color:#808080;">//alert(imageUploadJson.status);<br></span><span style="color:#808080;">            </span>}<br>            <span style="color:#cc7832;font-weight:bold;">return </span>imageUploadJson.status<span style="color:#cc7832;">;<br></span><span style="color:#cc7832;">        </span>}<span style="color:#cc7832;">,<br></span><span style="color:#cc7832;">        </span>error: <span style="color:#cc7832;font-weight:bold;">function </span>(e) {<br>            alert(<span style="color:#6a8759;">"error"</span>)<span style="color:#cc7832;">;<br></span><span style="color:#cc7832;">        </span>}<br>    })<span style="color:#cc7832;">;<br></span><span style="background-color:#344134;">}</span><span style="color:#cc7832;">;</span></pre><p><br></p><p>&gt;&gt; 작동 하는 예시&nbsp;</p><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'Fira Code';font-size:11.3pt;"><span style="color:#cc7832;font-weight:bold;">function </span>imgUploadfun() {<br>    <span style="color:#cc7832;font-weight:bold;">var </span>a <span style="color:#cc7832;">; <br></span><span style="color:#cc7832;"><br></span><span style="color:#cc7832;">    </span>$.ajax({<br>        url: <span style="color:#6a8759;">"mainImageUpload.php"</span><span style="color:#cc7832;">, </span><span style="color:#808080;">// Url to which the request is send<br></span><span style="color:#808080;">        </span>type: <span style="color:#6a8759;">"POST"</span><span style="color:#cc7832;">, </span><span style="color:#808080;">// Type of request to be send, called as method<br></span><span style="color:#808080;">        </span>data: postData<span style="color:#cc7832;">, </span><span style="color:#808080;">// Data sent to server, a set of key/value pairs (i.e. form fields and values)<br></span><span style="color:#808080;">        </span>contentType: <span style="color:#cc7832;font-weight:bold;">false</span><span style="color:#cc7832;">, </span><span style="color:#808080;">// The content type used when sending data to the server.<br></span><span style="color:#808080;">        </span>cache: <span style="color:#cc7832;font-weight:bold;">false</span><span style="color:#cc7832;">, </span><span style="color:#808080;">// To unable request pages to be cached<br></span><span style="color:#808080;">        </span>processData: <span style="color:#cc7832;font-weight:bold;">false</span><span style="color:#cc7832;">, </span><span style="color:#808080;">// To send DOMDocument or non processed data file it is set to false<br></span><span style="color:#808080;">        </span>async: <span style="color:#cc7832;font-weight:bold;">false</span><span style="color:#cc7832;">,<br></span><span style="color:#cc7832;">        </span>success: <span style="color:#cc7832;font-weight:bold;">function </span>(json<span style="color:#cc7832;">, </span>aJaxtatus) <span style="color:#808080;">// A function to be called if request succeeds<br></span><span style="color:#808080;">        </span>{<br>            <span style="color:#808080;">//var imageUploadJson = $.trim(json) ;<br></span><span style="color:#808080;">            </span><span style="color:#cc7832;font-weight:bold;">var </span>imageUploadJson = JSON.parse(json)<span style="color:#cc7832;">;<br></span><span style="color:#cc7832;">            </span><span style="color:#cc7832;font-weight:bold;">if </span>(imageUploadJson.status == <span style="color:#6a8759;">"OK"</span>) {<br>                mainImageUrl = imageUploadJson.url.slice(<span style="color:#6897bb;">9</span><span style="color:#cc7832;">, </span>imageUploadJson.url.length)<span style="color:#cc7832;">;<br></span><span style="color:#cc7832;">                </span><span style="color:#808080;">// ajaxMainImg(mainImageUrl);<br></span><span style="color:#808080;">            </span>} <span style="color:#cc7832;font-weight:bold;">else </span>{<br>                <span style="color:#808080;">//alert(imageUploadJson.status);<br></span><span style="color:#808080;">            </span>}<br>            a=imageUploadJson.status<span style="color:#cc7832;">;<br></span><span style="color:#cc7832;">        </span>}<span style="color:#cc7832;">,<br></span><span style="color:#cc7832;">        </span>error: <span style="color:#cc7832;font-weight:bold;">function </span>(e) {<br>            alert(<span style="color:#6a8759;">"error"</span>)<span style="color:#cc7832;">;<br></span><span style="color:#cc7832;">        </span>}<br>    })<span style="color:#cc7832;">;<br></span><span style="color:#cc7832;"><br></span><span style="color:#cc7832;">    </span><span style="color:#cc7832;font-weight:bold;">return </span>a<span style="color:#cc7832;">;<br></span>}<span style="color:#cc7832;">;</span></pre><p>위와 같이 변수에 값을 넣어주고 ajax 외부에서 return 해주어야 합니다.&nbsp;</p>